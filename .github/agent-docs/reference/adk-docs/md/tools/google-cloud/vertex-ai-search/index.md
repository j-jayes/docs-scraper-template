Skip to content 

[ ](../../.. "Agent Development Kit")

[ Agent Development Kit ](../../.. "Agent Development Kit")

Vertex AI Search 

Initializing search 




[ adk-python  ](https://github.com/google/adk-python "adk-python") [ adk-js  ](https://github.com/google/adk-js "adk-js") [ adk-go  ](https://github.com/google/adk-go "adk-go") [ adk-java  ](https://github.com/google/adk-java "adk-java")

[ adk-python  ](https://github.com/google/adk-python "adk-python") [ adk-js  ](https://github.com/google/adk-js "adk-js") [ adk-go  ](https://github.com/google/adk-go "adk-go") [ adk-java  ](https://github.com/google/adk-java "adk-java")

  * [ Home  ](../../..)

Home 
  * Build Agents  Build Agents 
    * [ Get Started  ](../../../get-started/)

Get Started 
      * [ Python  ](../../../get-started/python/)
      * [ TypeScript  ](../../../get-started/typescript/)
      * [ Go  ](../../../get-started/go/)
      * [ Java  ](../../../get-started/java/)
    * [ Build your Agent  ](../../../tutorials/)

Build your Agent 
      * [ Multi-tool agent  ](../../../get-started/quickstart/)
      * [ Agent team  ](../../../tutorials/agent-team/)
      * [ Streaming agent  ](../../../get-started/streaming/)

Streaming agent 
        * [ Python  ](../../../get-started/streaming/quickstart-streaming/)
        * [ Java  ](../../../get-started/streaming/quickstart-streaming-java/)
      * [ Visual Builder  ](../../../visual-builder/)
      * [ Coding with AI  ](../../../tutorials/coding-with-ai/)
      * [ Advanced setup  ](../../../get-started/installation/)
    * [ Agents  ](../../../agents/)

Agents 
      * [ LLM agents  ](../../../agents/llm-agents/)
      * [ Workflow agents  ](../../../agents/workflow-agents/)

Workflow agents 
        * [ Sequential agents  ](../../../agents/workflow-agents/sequential-agents/)
        * [ Loop agents  ](../../../agents/workflow-agents/loop-agents/)
        * [ Parallel agents  ](../../../agents/workflow-agents/parallel-agents/)
      * [ Custom agents  ](../../../agents/custom-agents/)
      * [ Multi-agent systems  ](../../../agents/multi-agents/)
      * [ Agent Config  ](../../../agents/config/)
      * [ Models & Authentication  ](../../../agents/models/)
    * [ Tools for Agents  ](../../)

Tools for Agents 
      * [ Gemini API tools  ](../../gemini-api/)

Gemini API tools 
        * [ Code Execution  ](../../gemini-api/code-execution/)
        * [ Computer use  ](../../gemini-api/computer-use/)
        * [ Google Search  ](../../gemini-api/google-search/)
      * [ Google Cloud tools  ](../)

Google Cloud tools 
        * [ Apigee API Hub  ](../apigee-api-hub/)
        * [ Application Integration  ](../application-integration/)
        * [ BigQuery  ](../bigquery/)
        * [ Bigtable  ](../bigtable/)
        * [ Cloud API Registry  ](../api-registry/)
        * [ Code Execution with Agent Engine  ](../code-exec-agent-engine/)
        * [ GKE Code Executor  ](../gke-code-executor/)
        * [ MCP Toolbox for Databases  ](../mcp-toolbox-for-databases/)
        * [ RAG Engine  ](../vertex-ai-rag-engine/)
        * [ Spanner  ](../spanner/)
        * [ Vertex AI Search  ](./)
      * [ Third-party tools  ](../../third-party/)

Third-party tools 
        * [ Atlassian  ](../../third-party/atlassian/)
        * [ GitHub  ](../../third-party/github/)
        * [ GitLab  ](../../third-party/gitlab/)
        * [ Hugging Face  ](../../third-party/hugging-face/)
        * [ Linear  ](../../third-party/linear/)
        * [ n8n  ](../../third-party/n8n/)
        * [ Notion  ](../../third-party/notion/)
        * [ PayPal  ](../../third-party/paypal/)
        * [ Qdrant  ](../../third-party/qdrant/)
        * [ Agentic UI (AG-UI)  ](../../third-party/ag-ui/)
      * [ Tool limitations  ](../../limitations/)
    * [ Custom Tools  ](../../../tools-custom/)

Custom Tools 
      * Function tools  Function tools 
        * [ Overview  ](../../../tools-custom/function-tools/)
        * [ Tool performance  ](../../../tools-custom/performance/)
        * [ Action confirmations  ](../../../tools-custom/confirmation/)
      * [ MCP tools  ](../../../tools-custom/mcp-tools/)
      * [ OpenAPI tools  ](../../../tools-custom/openapi-tools/)
      * [ Authentication  ](../../../tools-custom/authentication/)
  * Run Agents  Run Agents 
    * [ Agent Runtime  ](../../../runtime/)

Agent Runtime 
      * [ Runtime Config  ](../../../runtime/runconfig/)
      * [ API Server  ](../../../runtime/api-server/)
      * [ Resume Agents  ](../../../runtime/resume/)
    * [ Deployment  ](../../../deploy/)

Deployment 
      * [ Agent Engine  ](../../../deploy/agent-engine/)

Agent Engine 
        * [ Standard deployment  ](../../../deploy/agent-engine/deploy/)
        * [ Agent Starter Pack  ](../../../deploy/agent-engine/asp/)
        * [ Test deployed agents  ](../../../deploy/agent-engine/test/)
      * [ Cloud Run  ](../../../deploy/cloud-run/)
      * [ GKE  ](../../../deploy/gke/)
    * Observability  Observability 
      * [ Logging  ](../../../observability/logging/)
      * [ Cloud Trace  ](../../../observability/cloud-trace/)
      * [ BigQuery Agent Analytics  ](../../../observability/bigquery-agent-analytics/)
      * [ AgentOps  ](../../../observability/agentops/)
      * [ Arize AX  ](../../../observability/arize-ax/)
      * [ Freeplay  ](../../../observability/freeplay/)
      * [ MLflow  ](../../../observability/mlflow/)
      * [ Monocle  ](../../../observability/monocle/)
      * [ Phoenix  ](../../../observability/phoenix/)
      * [ W&B; Weave  ](../../../observability/weave/)
    * [ Evaluation  ](../../../evaluate/)

Evaluation 
      * [ Criteria  ](../../../evaluate/criteria/)
      * [ User Simulation  ](../../../evaluate/user-sim/)
    * [ Safety and Security  ](../../../safety/)

Safety and Security 
  * Components  Components 
    * [ Technical Overview  ](../../../get-started/about/)
    * [ Context  ](../../../context/)

Context 
      * [ Context caching  ](../../../context/caching/)
      * [ Context compression  ](../../../context/compaction/)
    * [ Sessions & Memory  ](../../../sessions/)

Sessions & Memory 
      * Sessions  Sessions 
        * [ Overview  ](../../../sessions/session/)
        * [ Rewind sessions  ](../../../sessions/rewind/)
      * [ State  ](../../../sessions/state/)
      * [ Memory  ](../../../sessions/memory/)
      * [ Vertex AI Express Mode  ](../../../sessions/express-mode/)
    * [ Callbacks  ](../../../callbacks/)

Callbacks 
      * [ Types of callbacks  ](../../../callbacks/types-of-callbacks/)
      * [ Callback patterns  ](../../../callbacks/design-patterns-and-best-practices/)
    * [ Artifacts  ](../../../artifacts/)

Artifacts 
    * [ Events  ](../../../events/)

Events 
    * [ Apps  ](../../../apps/)

Apps 
    * [ Plugins  ](../../../plugins/)

Plugins 
      * [ Reflect and retry  ](../../../plugins/reflect-and-retry/)
    * [ MCP  ](../../../mcp/)

MCP 
    * [ A2A Protocol  ](../../../a2a/)

A2A Protocol 
      * [ Introduction to A2A  ](../../../a2a/intro/)
      * A2A Quickstart (Exposing)  A2A Quickstart (Exposing) 
        * [ Python  ](../../../a2a/quickstart-exposing/)
        * [ Go  ](../../../a2a/quickstart-exposing-go/)
      * A2A Quickstart (Consuming)  A2A Quickstart (Consuming) 
        * [ Python  ](../../../a2a/quickstart-consuming/)
        * [ Go  ](../../../a2a/quickstart-consuming-go/)
    * [ Bidi-streaming (live)  ](../../../streaming/)

Bidi-streaming (live) 
      * Bidi-streaming development guide series  Bidi-streaming development guide series 
        * [ Part 1. Intro to streaming  ](../../../streaming/dev-guide/part1/)
        * [ Part 2. Sending messages  ](../../../streaming/dev-guide/part2/)
        * [ Part 3. Event handling  ](../../../streaming/dev-guide/part3/)
        * [ Part 4. Run configuration  ](../../../streaming/dev-guide/part4/)
        * [ Part 5. Audio, Images, and Video  ](../../../streaming/dev-guide/part5/)
      * [ Streaming Tools  ](../../../streaming/streaming-tools/)
      * [ Configuring Bidi-streaming behavior  ](../../../streaming/configuration/)
    * Grounding  Grounding 
      * [ Understanding Google Search Grounding  ](../../../grounding/google_search_grounding/)
      * [ Understanding Vertex AI Search Grounding  ](../../../grounding/vertex_ai_search_grounding/)
  * Reference  Reference 
    * [ Release Notes  ](../../../release-notes/)
    * [ API Reference  ](../../../api-reference/)

API Reference 
      * [ Python ADK  ](../../../api-reference/python/)
      * [ Typescript ADK  ](../../../api-reference/typescript/)
      * [ Go ADK  ](https://pkg.go.dev/google.golang.org/adk)
      * [ Java ADK  ](../../../api-reference/java/)
      * [ CLI Reference  ](../../../api-reference/cli/)
      * [ Agent Config Reference  ](../../../api-reference/agentconfig/)
      * [ REST API  ](../../../api-reference/rest/)
    * [ Community Resources  ](../../../community/)
    * [ Contributing Guide  ](../../../contributing-guide/)



  1. [ Build Agents  ](../../../get-started/)
  2. [ Tools for Agents  ](../../)
  3. [ Google Cloud tools  ](../)

[ ](https://github.com/google/adk-docs/edit/main/docs/tools/google-cloud/vertex-ai-search.md "Edit this page") [ ](https://github.com/google/adk-docs/raw/main/docs/tools/google-cloud/vertex-ai-search.md "View source of this page")

# Vertex AI Search tool for ADKÂ¶

Supported in ADKPython v0.1.0

The `vertex_ai_search_tool` uses Google Cloud Vertex AI Search, enabling the agent to search across your private, configured data stores (e.g., internal documents, company policies, knowledge bases). This built-in tool requires you to provide the specific data store ID during configuration. For further details of the tool, see [Understanding Vertex AI Search grounding](/adk-docs/grounding/vertex_ai_search_grounding/).

Warning: Single tool per agent limitation

This tool can only be used **_by itself_** within an agent instance. For more information about this limitation and workarounds, see [Limitations for ADK tools](/adk-docs/tools/limitations/#one-tool-one-agent).
    
    
    # Copyright 2024 Google LLC
    #
    # Licensed under the Apache License, Version 2.0 (the "License");
    # you may not use this file except in compliance with the License.
    # You may obtain a copy of the License at
    #
    #     http://www.apache.org/licenses/LICENSE-2.0
    #
    # Unless required by applicable law or agreed to in writing, software
    # distributed under the License is distributed on an "AS IS" BASIS,
    # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    # See the License for the specific language governing permissions and
    # limitations under the License.
    
    import asyncio
    
    from google.adk.agents import LlmAgent
    from google.adk.runners import Runner
    from google.adk.sessions import InMemorySessionService
    from google.genai import types
    from google.adk.tools import VertexAiSearchTool
    
    # Replace with your Vertex AI Search Datastore ID, and respective region (e.g. us-central1 or global).
    # Format: projects/<PROJECT_ID>/locations/<REGION>/collections/default_collection/dataStores/<DATASTORE_ID>
    DATASTORE_PATH = "DATASTORE_PATH_HERE"
    
    # Constants
    APP_NAME_VSEARCH = "vertex_search_app"
    USER_ID_VSEARCH = "user_vsearch_1"
    SESSION_ID_VSEARCH = "session_vsearch_1"
    AGENT_NAME_VSEARCH = "doc_qa_agent"
    GEMINI_2_FLASH = "gemini-2.0-flash"
    
    # Tool Instantiation
    # You MUST provide your datastore ID here.
    vertex_search_tool = VertexAiSearchTool(data_store_id=DATASTORE_PATH)
    
    # Agent Definition
    doc_qa_agent = LlmAgent(
        name=AGENT_NAME_VSEARCH,
        model=GEMINI_2_FLASH, # Requires Gemini model
        tools=[vertex_search_tool],
        instruction=f"""You are a helpful assistant that answers questions based on information found in the document store: {DATASTORE_PATH}.
        Use the search tool to find relevant information before answering.
        If the answer isn't in the documents, say that you couldn't find the information.
        """,
        description="Answers questions using a specific Vertex AI Search datastore.",
    )
    
    # Session and Runner Setup
    session_service_vsearch = InMemorySessionService()
    runner_vsearch = Runner(
        agent=doc_qa_agent, app_name=APP_NAME_VSEARCH, session_service=session_service_vsearch
    )
    session_vsearch = session_service_vsearch.create_session(
        app_name=APP_NAME_VSEARCH, user_id=USER_ID_VSEARCH, session_id=SESSION_ID_VSEARCH
    )
    
    # Agent Interaction Function
    async def call_vsearch_agent_async(query):
        print("\n--- Running Vertex AI Search Agent ---")
        print(f"Query: {query}")
        if "DATASTORE_PATH_HERE" in DATASTORE_PATH:
            print("Skipping execution: Please replace DATASTORE_PATH_HERE with your actual datastore ID.")
            print("-" * 30)
            return
    
        content = types.Content(role='user', parts=[types.Part(text=query)])
        final_response_text = "No response received."
        try:
            async for event in runner_vsearch.run_async(
                user_id=USER_ID_VSEARCH, session_id=SESSION_ID_VSEARCH, new_message=content
            ):
                # Like Google Search, results are often embedded in the model's response.
                if event.is_final_response() and event.content and event.content.parts:
                    final_response_text = event.content.parts[0].text.strip()
                    print(f"Agent Response: {final_response_text}")
                    # You can inspect event.grounding_metadata for source citations
                    if event.grounding_metadata:
                        print(f"  (Grounding metadata found with {len(event.grounding_metadata.grounding_attributions)} attributions)")
    
        except Exception as e:
            print(f"An error occurred: {e}")
            print("Ensure your datastore ID is correct and the service account has permissions.")
        print("-" * 30)
    
    # --- Run Example ---
    async def run_vsearch_example():
        # Replace with a question relevant to YOUR datastore content
        await call_vsearch_agent_async("Summarize the main points about the Q2 strategy document.")
        await call_vsearch_agent_async("What safety procedures are mentioned for lab X?")
    
    # Execute the example
    # await run_vsearch_example()
    
    # Running locally due to potential colab asyncio issues with multiple awaits
    try:
        asyncio.run(run_vsearch_example())
    except RuntimeError as e:
        if "cannot be called from a running event loop" in str(e):
            print("Skipping execution in running event loop (like Colab/Jupyter). Run locally.")
        else:
            raise e
    

Back to top  [ Previous  Spanner  ](../spanner/) [ Next  Third-Party Tools  ](../../third-party/)

Copyright Google 2025  |  [Terms](//policies.google.com/terms)  |  [Privacy](//policies.google.com/privacy)  |  Manage cookies

Made with [ Material for MkDocs ](https://squidfunk.github.io/mkdocs-material/)

#### Cookie consent

We use cookies to recognize repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find the information they need. With your consent, you're helping us to make our documentation better.

  * Google Analytics 
  * GitHub 



Accept Manage settings
