Skip to content 

[ ](../.. "Agent Development Kit")

[ Agent Development Kit ](../.. "Agent Development Kit")

Resume Agents 

Initializing search 




[ adk-python  ](https://github.com/google/adk-python "adk-python") [ adk-js  ](https://github.com/google/adk-js "adk-js") [ adk-go  ](https://github.com/google/adk-go "adk-go") [ adk-java  ](https://github.com/google/adk-java "adk-java")

[ adk-python  ](https://github.com/google/adk-python "adk-python") [ adk-js  ](https://github.com/google/adk-js "adk-js") [ adk-go  ](https://github.com/google/adk-go "adk-go") [ adk-java  ](https://github.com/google/adk-java "adk-java")

  * [ Home  ](../..)

Home 
  * Build Agents  Build Agents 
    * [ Get Started  ](../../get-started/)

Get Started 
      * [ Python  ](../../get-started/python/)
      * [ TypeScript  ](../../get-started/typescript/)
      * [ Go  ](../../get-started/go/)
      * [ Java  ](../../get-started/java/)
    * [ Build your Agent  ](../../tutorials/)

Build your Agent 
      * [ Multi-tool agent  ](../../get-started/quickstart/)
      * [ Agent team  ](../../tutorials/agent-team/)
      * [ Streaming agent  ](../../get-started/streaming/)

Streaming agent 
        * [ Python  ](../../get-started/streaming/quickstart-streaming/)
        * [ Java  ](../../get-started/streaming/quickstart-streaming-java/)
      * [ Visual Builder  ](../../visual-builder/)
      * [ Coding with AI  ](../../tutorials/coding-with-ai/)
      * [ Advanced setup  ](../../get-started/installation/)
    * [ Agents  ](../../agents/)

Agents 
      * [ LLM agents  ](../../agents/llm-agents/)
      * [ Workflow agents  ](../../agents/workflow-agents/)

Workflow agents 
        * [ Sequential agents  ](../../agents/workflow-agents/sequential-agents/)
        * [ Loop agents  ](../../agents/workflow-agents/loop-agents/)
        * [ Parallel agents  ](../../agents/workflow-agents/parallel-agents/)
      * [ Custom agents  ](../../agents/custom-agents/)
      * [ Multi-agent systems  ](../../agents/multi-agents/)
      * [ Agent Config  ](../../agents/config/)
      * [ Models & Authentication  ](../../agents/models/)
    * [ Tools for Agents  ](../../tools/)

Tools for Agents 
      * [ Gemini API tools  ](../../tools/gemini-api/)

Gemini API tools 
        * [ Code Execution  ](../../tools/gemini-api/code-execution/)
        * [ Computer use  ](../../tools/gemini-api/computer-use/)
        * [ Google Search  ](../../tools/gemini-api/google-search/)
      * [ Google Cloud tools  ](../../tools/google-cloud/)

Google Cloud tools 
        * [ Apigee API Hub  ](../../tools/google-cloud/apigee-api-hub/)
        * [ Application Integration  ](../../tools/google-cloud/application-integration/)
        * [ BigQuery  ](../../tools/google-cloud/bigquery/)
        * [ Bigtable  ](../../tools/google-cloud/bigtable/)
        * [ Cloud API Registry  ](../../tools/google-cloud/api-registry/)
        * [ Code Execution with Agent Engine  ](../../tools/google-cloud/code-exec-agent-engine/)
        * [ GKE Code Executor  ](../../tools/google-cloud/gke-code-executor/)
        * [ MCP Toolbox for Databases  ](../../tools/google-cloud/mcp-toolbox-for-databases/)
        * [ RAG Engine  ](../../tools/google-cloud/vertex-ai-rag-engine/)
        * [ Spanner  ](../../tools/google-cloud/spanner/)
        * [ Vertex AI Search  ](../../tools/google-cloud/vertex-ai-search/)
      * [ Third-party tools  ](../../tools/third-party/)

Third-party tools 
        * [ Atlassian  ](../../tools/third-party/atlassian/)
        * [ GitHub  ](../../tools/third-party/github/)
        * [ GitLab  ](../../tools/third-party/gitlab/)
        * [ Hugging Face  ](../../tools/third-party/hugging-face/)
        * [ Linear  ](../../tools/third-party/linear/)
        * [ n8n  ](../../tools/third-party/n8n/)
        * [ Notion  ](../../tools/third-party/notion/)
        * [ PayPal  ](../../tools/third-party/paypal/)
        * [ Qdrant  ](../../tools/third-party/qdrant/)
        * [ Agentic UI (AG-UI)  ](../../tools/third-party/ag-ui/)
      * [ Tool limitations  ](../../tools/limitations/)
    * [ Custom Tools  ](../../tools-custom/)

Custom Tools 
      * Function tools  Function tools 
        * [ Overview  ](../../tools-custom/function-tools/)
        * [ Tool performance  ](../../tools-custom/performance/)
        * [ Action confirmations  ](../../tools-custom/confirmation/)
      * [ MCP tools  ](../../tools-custom/mcp-tools/)
      * [ OpenAPI tools  ](../../tools-custom/openapi-tools/)
      * [ Authentication  ](../../tools-custom/authentication/)
  * Run Agents  Run Agents 
    * [ Agent Runtime  ](../)

Agent Runtime 
      * [ Runtime Config  ](../runconfig/)
      * [ API Server  ](../api-server/)
      * Resume Agents  [ Resume Agents  ](./) Table of contents 
        * Add resumable configuration 
        * Resume a stopped workflow 
        * How it works 
        * Add resume to custom Agents 
    * [ Deployment  ](../../deploy/)

Deployment 
      * [ Agent Engine  ](../../deploy/agent-engine/)

Agent Engine 
        * [ Standard deployment  ](../../deploy/agent-engine/deploy/)
        * [ Agent Starter Pack  ](../../deploy/agent-engine/asp/)
        * [ Test deployed agents  ](../../deploy/agent-engine/test/)
      * [ Cloud Run  ](../../deploy/cloud-run/)
      * [ GKE  ](../../deploy/gke/)
    * Observability  Observability 
      * [ Logging  ](../../observability/logging/)
      * [ Cloud Trace  ](../../observability/cloud-trace/)
      * [ BigQuery Agent Analytics  ](../../observability/bigquery-agent-analytics/)
      * [ AgentOps  ](../../observability/agentops/)
      * [ Arize AX  ](../../observability/arize-ax/)
      * [ Freeplay  ](../../observability/freeplay/)
      * [ MLflow  ](../../observability/mlflow/)
      * [ Monocle  ](../../observability/monocle/)
      * [ Phoenix  ](../../observability/phoenix/)
      * [ W&B; Weave  ](../../observability/weave/)
    * [ Evaluation  ](../../evaluate/)

Evaluation 
      * [ Criteria  ](../../evaluate/criteria/)
      * [ User Simulation  ](../../evaluate/user-sim/)
    * [ Safety and Security  ](../../safety/)

Safety and Security 
  * Components  Components 
    * [ Technical Overview  ](../../get-started/about/)
    * [ Context  ](../../context/)

Context 
      * [ Context caching  ](../../context/caching/)
      * [ Context compression  ](../../context/compaction/)
    * [ Sessions & Memory  ](../../sessions/)

Sessions & Memory 
      * Sessions  Sessions 
        * [ Overview  ](../../sessions/session/)
        * [ Rewind sessions  ](../../sessions/rewind/)
      * [ State  ](../../sessions/state/)
      * [ Memory  ](../../sessions/memory/)
      * [ Vertex AI Express Mode  ](../../sessions/express-mode/)
    * [ Callbacks  ](../../callbacks/)

Callbacks 
      * [ Types of callbacks  ](../../callbacks/types-of-callbacks/)
      * [ Callback patterns  ](../../callbacks/design-patterns-and-best-practices/)
    * [ Artifacts  ](../../artifacts/)

Artifacts 
    * [ Events  ](../../events/)

Events 
    * [ Apps  ](../../apps/)

Apps 
    * [ Plugins  ](../../plugins/)

Plugins 
      * [ Reflect and retry  ](../../plugins/reflect-and-retry/)
    * [ MCP  ](../../mcp/)

MCP 
    * [ A2A Protocol  ](../../a2a/)

A2A Protocol 
      * [ Introduction to A2A  ](../../a2a/intro/)
      * A2A Quickstart (Exposing)  A2A Quickstart (Exposing) 
        * [ Python  ](../../a2a/quickstart-exposing/)
        * [ Go  ](../../a2a/quickstart-exposing-go/)
      * A2A Quickstart (Consuming)  A2A Quickstart (Consuming) 
        * [ Python  ](../../a2a/quickstart-consuming/)
        * [ Go  ](../../a2a/quickstart-consuming-go/)
    * [ Bidi-streaming (live)  ](../../streaming/)

Bidi-streaming (live) 
      * Bidi-streaming development guide series  Bidi-streaming development guide series 
        * [ Part 1. Intro to streaming  ](../../streaming/dev-guide/part1/)
        * [ Part 2. Sending messages  ](../../streaming/dev-guide/part2/)
        * [ Part 3. Event handling  ](../../streaming/dev-guide/part3/)
        * [ Part 4. Run configuration  ](../../streaming/dev-guide/part4/)
        * [ Part 5. Audio, Images, and Video  ](../../streaming/dev-guide/part5/)
      * [ Streaming Tools  ](../../streaming/streaming-tools/)
      * [ Configuring Bidi-streaming behavior  ](../../streaming/configuration/)
    * Grounding  Grounding 
      * [ Understanding Google Search Grounding  ](../../grounding/google_search_grounding/)
      * [ Understanding Vertex AI Search Grounding  ](../../grounding/vertex_ai_search_grounding/)
  * Reference  Reference 
    * [ Release Notes  ](../../release-notes/)
    * [ API Reference  ](../../api-reference/)

API Reference 
      * [ Python ADK  ](../../api-reference/python/)
      * [ Typescript ADK  ](../../api-reference/typescript/)
      * [ Go ADK  ](https://pkg.go.dev/google.golang.org/adk)
      * [ Java ADK  ](../../api-reference/java/)
      * [ CLI Reference  ](../../api-reference/cli/)
      * [ Agent Config Reference  ](../../api-reference/agentconfig/)
      * [ REST API  ](../../api-reference/rest/)
    * [ Community Resources  ](../../community/)
    * [ Contributing Guide  ](../../contributing-guide/)



Table of contents 

  * Add resumable configuration 
  * Resume a stopped workflow 
  * How it works 
  * Add resume to custom Agents 



  1. [ Run Agents  ](../)
  2. [ Agent Runtime  ](../)

[ ](https://github.com/google/adk-docs/edit/main/docs/runtime/resume.md "Edit this page") [ ](https://github.com/google/adk-docs/raw/main/docs/runtime/resume.md "View source of this page")

# Resume stopped agents¶

Supported in ADKPython v1.14.0

An ADK agent's execution can be interrupted by various factors including dropped network connections, power failure, or a required external system going offline. The Resume feature of ADK allows an agent workflow to pick up where it left off, avoiding the need to restart the entire workflow. In ADK Python 1.16 and higher, you can configure an ADK workflow to be resumable, so that it tracks the execution of workflow and then allows you to resume it after an unexpected interruption.

This guide explains how to configure your ADK agent workflow to be resumable. If you use Custom Agents, you can update them to be resumable. For more information, see Add resume to custom Agents.

## Add resumable configuration¶

Enable the Resume function for an agent workflow by applying a Resumabiltiy configuration to the App object of your ADK workflow, as shown in the following code example:
    
    
    app = App(
        name='my_resumable_agent',
        root_agent=root_agent,
        # Set the resumability config to enable resumability.
        resumability_config=ResumabilityConfig(
            is_resumable=True,
        ),
    )
    

Caution: Long Running Functions, Confirmations, Authentication

For agents that use [Long Running Functions](/adk-docs/tools-custom/function-tools/#long-run-tool), [Confirmations](/adk-docs/tools-custom/confirmation/), or [Authentication](/adk-docs/tools-custom/authentication/) requiring user input, adding a resumable confirmation changes how these features operate. For more information, see the documentation for those features.

Note: Custom Agents

Resume is not supported by default for Custom Agents. You must update the agent code for a Custom Agent to support the Resume feature. For information on modifying Custom Agents to support incremental resume functionality, see Add resume to custom Agents.

## Resume a stopped workflow¶

When an ADK workflow stops execution you can resume the workflow using a command containing the Invocation ID for the workflow instance, which can be found in the [Event](/adk-docs/events/#understanding-and-using-events) history of the workflow. Make sure the ADK API server is running, in case it was interrupted or powered off, and then run the following command to resume the workflow, as shown in the following API request example.
    
    
    # restart the API server if needed:
    adk api_server my_resumable_agent/
    
    # resume the agent:
    curl -X POST http://localhost:8000/run_sse \
     -H "Content-Type: application/json" \
     -d '{
       "app_name": "my_resumable_agent",
       "user_id": "u_123",
       "session_id": "s_abc",
       "invocation_id": "invocation-123",
     }'
    

You can also resume a workflow using the Runner object Run Async method, as shown below:
    
    
    runner.run_async(user_id='u_123', session_id='s_abc', 
        invocation_id='invocation-123')
    
    # When new_message is set to a function response,
    # we are trying to resume a long running function.
    

Note

Resuming a workflow from the ADK Web user interface or using the ADK command line (CLI) tool is not currently supported.

## How it works¶

The Resume feature works by logging completed Agent workflow tasks, including incremental steps using [Events](/adk-docs/events/) and [Event Actions](/adk-docs/events/#detecting-actions-and-side-effects). tracking completion of agent tasks within a resumable workflow. If a workflow is interrupted and then later restarted, the system resumes the workflow by setting the completion state of each agent. If an agent did not complete, the workflow system reinstates any completed Events for that agent, and restarts the workflow from the partially completed state. For multi-agent workflows, the specific resume behavior varies, based on the multi-agent classes in your workflow, as described below:

  * **Sequential Agent** : Reads the current_sub_agent from its saved state to find the next sub-agent to run in the sequence.
  * **Loop Agent** : Uses the current_sub_agent and times_looped values to continue the loop from the last completed iteration and sub-agent.
  * **Parallel Agent** : Determines which sub-agents have already completed and only runs those that have not finished.



Event logging includes results from Tools which successfully returned a result. So if an agent successfully executed Function Tools A and B, and then failed during execution of tool C, the system reinstates the results from the tools A and B, and resumes the workflow by re-running the tool C request.

Caution: Tool execution behavior

When resuming a workflow with Tools, the Resume feature ensures that the Tools in an agent are run **_at least once_** , and may run more than once when resuming a workflow. If your agent uses Tools where duplicate runs would have a negative impact, such as purchases, you should modify the Tool to check for and prevent duplicate runs.

Note: Workflow modification with Resume not supported

Do not modify a stopped agent workflow before resuming it. For example adding or removing agents from workflow that has stopped and then resuming that workflow is not supported.

## Add resume to custom Agents¶

Custom agents have specific implementation requirements in order to support resumability. You must decide on and define workflow steps within your custom agent which produce a result which can be preserved before handing off to the next step of processing. The following steps outline how to modify a Custom Agent to support a workflow Resume.

  * **Create CustomAgentState class** : Extend the BaseAgentState to create an object that preserves the state of your agent.
    * **Optionally, create WorkFlowStep class** : If your custom agent has sequential steps, consider creating a WorkFlowStep list object that defines the discrete, savable steps of the agent.
  * **Add initial agent state:** Modify your agent's async run function to set the initial state of your agent.
  * **Add agent state checkpoints** : Modify your agent's async run function to generate and save the agent state for each completed step of the agent's overall task.
  * **Add end of agent status to track agent state:** Modify your agent's async run function to include an `end_of_agent=True` status upon successful completion of the agent's full task.



The following example shows the required code modifications to the example StoryFlowAgent class shown in the [Custom Agents](/adk-docs/agents/custom-agents/#full-code-example) guide:
    
    
    class WorkflowStep(int, Enum):
     INITIAL_STORY_GENERATION = 1
     CRITIC_REVISER_LOOP = 2
     POST_PROCESSING = 3
     CONDITIONAL_REGENERATION = 4
    
    # Extend BaseAgentState
    
    ### class StoryFlowAgentState(BaseAgentState):
    
    ###   step = WorkflowStep
    
    @override
    async def _run_async_impl(
        self, ctx: InvocationContext
    ) -> AsyncGenerator[Event, None]:
        """
        Implements the custom orchestration logic for the story workflow.
        Uses the instance attributes assigned by Pydantic (e.g., self.story_generator).
        """
        agent_state = self._load_agent_state(ctx, WorkflowStep)
    
        if agent_state is None:
          # Record the start of the agent
          agent_state = StoryFlowAgentState(step=WorkflowStep.INITIAL_STORY_GENERATION)
          yield self._create_agent_state_event(ctx, agent_state)
    
        next_step = agent_state.step
        logger.info(f"[{self.name}] Starting story generation workflow.")
    
        # Step 1. Initial Story Generation
        if next_step <= WorkflowStep.INITIAL_STORY_GENERATION:
          logger.info(f"[{self.name}] Running StoryGenerator...")
          async for event in self.story_generator.run_async(ctx):
              yield event
    
          # Check if story was generated before proceeding
          if "current_story" not in ctx.session.state or not ctx.session.state[
              "current_story"
          ]:
              return  # Stop processing if initial story failed
    
        agent_state = StoryFlowAgentState(step=WorkflowStep.CRITIC_REVISER_LOOP)
        yield self._create_agent_state_event(ctx, agent_state)
    
        # Step 2. Critic-Reviser Loop
        if next_step <= WorkflowStep.CRITIC_REVISER_LOOP:
          logger.info(f"[{self.name}] Running CriticReviserLoop...")
          async for event in self.loop_agent.run_async(ctx):
              logger.info(
                  f"[{self.name}] Event from CriticReviserLoop: "
                  f"{event.model_dump_json(indent=2, exclude_none=True)}"
              )
              yield event
    
        agent_state = StoryFlowAgentState(step=WorkflowStep.POST_PROCESSING)
        yield self._create_agent_state_event(ctx, agent_state)
    
        # Step 3. Sequential Post-Processing (Grammar and Tone Check)
        if next_step <= WorkflowStep.POST_PROCESSING:
          logger.info(f"[{self.name}] Running PostProcessing...")
          async for event in self.sequential_agent.run_async(ctx):
              logger.info(
                  f"[{self.name}] Event from PostProcessing: "
                  f"{event.model_dump_json(indent=2, exclude_none=True)}"
              )
              yield event
    
        agent_state = StoryFlowAgentState(step=WorkflowStep.CONDITIONAL_REGENERATION)
        yield self._create_agent_state_event(ctx, agent_state)
    
        # Step 4. Tone-Based Conditional Logic
        if next_step <= WorkflowStep.CONDITIONAL_REGENERATION:
          tone_check_result = ctx.session.state.get("tone_check_result")
          if tone_check_result == "negative":
              logger.info(f"[{self.name}] Tone is negative. Regenerating story...")
              async for event in self.story_generator.run_async(ctx):
                  logger.info(
                      f"[{self.name}] Event from StoryGenerator (Regen): "
                      f"{event.model_dump_json(indent=2, exclude_none=True)}"
                  )
                  yield event
          else:
              logger.info(f"[{self.name}] Tone is not negative. Keeping current story.")
    
        logger.info(f"[{self.name}] Workflow finished.")
        yield self._create_agent_state_event(ctx, end_of_agent=True)
    

Back to top  [ Previous  API Server  ](../api-server/) [ Next  Deploying Your Agent  ](../../deploy/)

Copyright Google 2025  |  [Terms](//policies.google.com/terms)  |  [Privacy](//policies.google.com/privacy)  |  Manage cookies

Made with [ Material for MkDocs ](https://squidfunk.github.io/mkdocs-material/)

#### Cookie consent

We use cookies to recognize repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find the information they need. With your consent, you're helping us to make our documentation better.

  * Google Analytics 
  * GitHub 



Accept Manage settings
