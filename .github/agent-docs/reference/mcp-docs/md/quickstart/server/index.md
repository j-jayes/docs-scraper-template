[ Model Context Protocol ÔºàMCPÔºâ ](https://modelcontextprotocol.info/)[Home ](https://modelcontextprotocol.info/)[Documentation ](https://modelcontextprotocol.info/docs/)[Specification ](https://modelcontextprotocol.info/specification/)[Tools ](https://modelcontextprotocol.info/tools/)[Blog](https://modelcontextprotocol.info/blog/)

`CTRL K`




`CTRL K`




  * [MCP Docs ](https://modelcontextprotocol.info/docs/)

    * [Understanding Model Context Protocol (MCP)](https://modelcontextprotocol.info/docs/introduction/)
    * [MCP Learning Path: From Zero to Hero](https://modelcontextprotocol.info/docs/learning-path/)
    * [Quickstart ](https://modelcontextprotocol.info/docs/quickstart/)

      * [Guide](https://modelcontextprotocol.info/docs/quickstart/guide/)
      * [For Server Developers](https://modelcontextprotocol.info/docs/quickstart/server/)
        *         * What‚Äôs happening under the hood
        * Troubleshooting
        * Next steps
      * [For Client Developers](https://modelcontextprotocol.info/docs/quickstart/client/)
      * [Your First MCP Experience: 5-Minute Setup](https://modelcontextprotocol.info/docs/quickstart/user/)
      * [Quickstart](https://modelcontextprotocol.info/docs/quickstart/quickstart/)

    * [Core Concepts ](https://modelcontextprotocol.info/docs/concepts/)

      * [MCP Architecture: Design Philosophy & Engineering Principles](https://modelcontextprotocol.info/docs/concepts/architecture/)
      * [Prompts](https://modelcontextprotocol.info/docs/concepts/prompts/)
      * [Resources](https://modelcontextprotocol.info/docs/concepts/resources/)
      * [Roots](https://modelcontextprotocol.info/docs/concepts/roots/)
      * [Sampling](https://modelcontextprotocol.info/docs/concepts/sampling/)
      * [Tools](https://modelcontextprotocol.info/docs/concepts/tools/)
      * [Transports](https://modelcontextprotocol.info/docs/concepts/transports/)

    * [MCP Tutorials: From Concept to Production ](https://modelcontextprotocol.info/docs/tutorials/)

      * [Building MCP with LLMs](https://modelcontextprotocol.info/docs/tutorials/building-mcp-with-llms/)
      * [Building MCP clients-Python](https://modelcontextprotocol.info/docs/tutorials/building-a-client/)
      * [Building MCP clients-Node.js](https://modelcontextprotocol.info/docs/tutorials/building-a-client-node/)
      * [Writing Effective Tools for Agents: Complete MCP Development Guide](https://modelcontextprotocol.info/docs/tutorials/writing-effective-tools/)

    * [MCP Server Ecosystem: From Proof-of-Concept to Production](https://modelcontextprotocol.info/docs/examples/)
    * [Clients](https://modelcontextprotocol.info/docs/clients/)
    * [MCP FAQ: Expert Answers to Real-World Questions](https://modelcontextprotocol.info/docs/faqs/)
    * [MCP Best Practices: Architecture & Implementation Guide](https://modelcontextprotocol.info/docs/best-practices/)
    * [SDK ](https://modelcontextprotocol.info/docs/sdk/)

      * [Java SDK ](https://modelcontextprotocol.info/docs/sdk/java/)

        * [Overview](https://modelcontextprotocol.info/docs/sdk/java/mcp-overview/)
        * [MCP Server](https://modelcontextprotocol.info/docs/sdk/java/mcp-server/)
        * [MCP Client](https://modelcontextprotocol.info/docs/sdk/java/mcp-client/)

    * [Build an MCP Client (Core)](https://modelcontextprotocol.info/docs/development/build-client/)

  * [Tools ](https://modelcontextprotocol.info/tools/)

    * [MCP Registry ](https://modelcontextprotocol.info/tools/registry/)

      * [Publish Your MCP Server](https://modelcontextprotocol.info/tools/registry/publishing/)
      * [Registry CLI Tool](https://modelcontextprotocol.info/tools/registry/cli/)
      * [GitHub Actions Ëá™Âä®ÂåñÂèëÂ∏É](https://modelcontextprotocol.info/tools/registry/github-actions/)
      * [Ê∂àË¥π Registry Êï∞ÊçÆ](https://modelcontextprotocol.info/tools/registry/consuming/)
      * [Registry FAQ](https://modelcontextprotocol.info/tools/registry/faq/)

    * [Debugging](https://modelcontextprotocol.info/tools/debugging/)
    * [Inspector](https://modelcontextprotocol.info/tools/inspector/)
    * [ÊµãËØï](https://modelcontextprotocol.info/tools/test/)

  * [Specification ](https://modelcontextprotocol.info/specification/)

    * [Specification (Draft) ](https://modelcontextprotocol.info/specification/draft/)

      * [Architecture](https://modelcontextprotocol.info/specification/draft/architecture/)
      * [Base Protocol ](https://modelcontextprotocol.info/specification/draft/basic/)

        * [Transports](https://modelcontextprotocol.info/specification/draft/basic/transports/)
        * [Authorization](https://modelcontextprotocol.info/specification/draft/basic/authorization/)
        * [Messages](https://modelcontextprotocol.info/specification/draft/basic/messages/)
        * [Lifecycle](https://modelcontextprotocol.info/specification/draft/basic/lifecycle/)
        * [Versioning](https://modelcontextprotocol.info/specification/draft/basic/versioning/)
        * [Utilities ](https://modelcontextprotocol.info/specification/draft/basic/utilities/)

          * [Ping](https://modelcontextprotocol.info/specification/draft/basic/utilities/ping/)
          * [Cancellation](https://modelcontextprotocol.info/specification/draft/basic/utilities/cancellation/)
          * [Progress](https://modelcontextprotocol.info/specification/draft/basic/utilities/progress/)

      * [Server Features ](https://modelcontextprotocol.info/specification/draft/server/)

        * [Prompts](https://modelcontextprotocol.info/specification/draft/server/prompts/)
        * [Resources](https://modelcontextprotocol.info/specification/draft/server/resources/)
        * [Tools](https://modelcontextprotocol.info/specification/draft/server/tools/)
        * [Utilities ](https://modelcontextprotocol.info/specification/draft/server/utilities/)

          * [Completion](https://modelcontextprotocol.info/specification/draft/server/utilities/completion/)
          * [Logging](https://modelcontextprotocol.info/specification/draft/server/utilities/logging/)
          * [Pagination](https://modelcontextprotocol.info/specification/draft/server/utilities/pagination/)

      * [Client Features ](https://modelcontextprotocol.info/specification/draft/client/)

        * [Roots](https://modelcontextprotocol.info/specification/draft/client/roots/)
        * [Sampling](https://modelcontextprotocol.info/specification/draft/client/sampling/)

      * [Contributions](https://modelcontextprotocol.info/specification/draft/contributing/)
      * [Revisions ](https://modelcontextprotocol.info/specification/draft/revisions/)

        * [2024-11-05 (Current)](https://modelcontextprotocol.info/specification/draft/revisions/2024-11-05/)

    * [Specification (Latest) ](https://modelcontextprotocol.info/specification/2024-11-05/)

      * [Architecture](https://modelcontextprotocol.info/specification/2024-11-05/architecture/)
      * [Base Protocol ](https://modelcontextprotocol.info/specification/2024-11-05/basic/)

        * [Messages](https://modelcontextprotocol.info/specification/2024-11-05/basic/messages/)
        * [Lifecycle](https://modelcontextprotocol.info/specification/2024-11-05/basic/lifecycle/)
        * [Transports](https://modelcontextprotocol.info/specification/2024-11-05/basic/transports/)
        * [Versioning](https://modelcontextprotocol.info/specification/2024-11-05/basic/versioning/)
        * [Utilities ](https://modelcontextprotocol.info/specification/2024-11-05/basic/utilities/)

          * [Ping](https://modelcontextprotocol.info/specification/2024-11-05/basic/utilities/ping/)
          * [Cancellation](https://modelcontextprotocol.info/specification/2024-11-05/basic/utilities/cancellation/)
          * [Progress](https://modelcontextprotocol.info/specification/2024-11-05/basic/utilities/progress/)

      * [Server Features ](https://modelcontextprotocol.info/specification/2024-11-05/server/)

        * [Prompts](https://modelcontextprotocol.info/specification/2024-11-05/server/prompts/)
        * [Resources](https://modelcontextprotocol.info/specification/2024-11-05/server/resources/)
        * [Tools](https://modelcontextprotocol.info/specification/2024-11-05/server/tools/)
        * [Utilities ](https://modelcontextprotocol.info/specification/2024-11-05/server/utilities/)

          * [Completion](https://modelcontextprotocol.info/specification/2024-11-05/server/utilities/completion/)
          * [Logging](https://modelcontextprotocol.info/specification/2024-11-05/server/utilities/logging/)
          * [Pagination](https://modelcontextprotocol.info/specification/2024-11-05/server/utilities/pagination/)

      * [Client Features ](https://modelcontextprotocol.info/specification/2024-11-05/client/)

        * [Roots](https://modelcontextprotocol.info/specification/2024-11-05/client/roots/)
        * [Sampling](https://modelcontextprotocol.info/specification/2024-11-05/client/sampling/)

      * [Contributions](https://modelcontextprotocol.info/specification/2024-11-05/contributing/)
      * [Revisions ](https://modelcontextprotocol.info/specification/2024-11-05/revisions/)

        * [2024-11-05 (Current)](https://modelcontextprotocol.info/specification/2024-11-05/revisions/2024-11-05/)

  * [MCP Protocol Blog ](https://modelcontextprotocol.info/blog/)

    * [Mastering MCP Tool Development: Unlocking AI Agent Potential](https://modelcontextprotocol.info/blog/writing-effective-mcp-tools/)
    * [Update on the Next MCP Protocol Release](https://modelcontextprotocol.info/blog/mcp-next-version-update/)
    * [Chrome DevTools MCP: Giving AI Coding Assistants Eyes to See Beyond Blind Programming](https://modelcontextprotocol.info/blog/chrome-devtools-mcp-ai-debugging/)
    * [Model Context Protocol (MCP): A New Standard for AI Application and External Data Integration](https://modelcontextprotocol.info/blog/mcp-guide/)
    * [‰∏ÄÊñáËØªÊáÇMCPÂçèËÆÆÔºöÂ§ßÊ®°ÂûãAI-AgentÁöÑUSB-CÊé•Âè£](https://modelcontextprotocol.info/blog/understanding-mcp-protocol/)

  * [About](https://modelcontextprotocol.info/about/)
  * More
  * [Docs ‚Üó](https://modelcontextprotocol.info/docs/)
  * [Specification ‚Üó](https://modelcontextprotocol.info/specification/)
  * [About](https://modelcontextprotocol.info/about)


  * [Understanding Model Context Protocol (MCP)](https://modelcontextprotocol.info/docs/introduction/)
  * [MCP Learning Path: From Zero to Hero](https://modelcontextprotocol.info/docs/learning-path/)
  * [Quickstart ](https://modelcontextprotocol.info/docs/quickstart/)

    * [Guide](https://modelcontextprotocol.info/docs/quickstart/guide/)
    * [For Server Developers](https://modelcontextprotocol.info/docs/quickstart/server/)
    * [For Client Developers](https://modelcontextprotocol.info/docs/quickstart/client/)
    * [Your First MCP Experience: 5-Minute Setup](https://modelcontextprotocol.info/docs/quickstart/user/)
    * [Quickstart](https://modelcontextprotocol.info/docs/quickstart/quickstart/)

  * [Core Concepts ](https://modelcontextprotocol.info/docs/concepts/)

    * [MCP Architecture: Design Philosophy & Engineering Principles](https://modelcontextprotocol.info/docs/concepts/architecture/)
    * [Prompts](https://modelcontextprotocol.info/docs/concepts/prompts/)
    * [Resources](https://modelcontextprotocol.info/docs/concepts/resources/)
    * [Roots](https://modelcontextprotocol.info/docs/concepts/roots/)
    * [Sampling](https://modelcontextprotocol.info/docs/concepts/sampling/)
    * [Tools](https://modelcontextprotocol.info/docs/concepts/tools/)
    * [Transports](https://modelcontextprotocol.info/docs/concepts/transports/)

  * [MCP Tutorials: From Concept to Production ](https://modelcontextprotocol.info/docs/tutorials/)

    * [Building MCP with LLMs](https://modelcontextprotocol.info/docs/tutorials/building-mcp-with-llms/)
    * [Building MCP clients-Python](https://modelcontextprotocol.info/docs/tutorials/building-a-client/)
    * [Building MCP clients-Node.js](https://modelcontextprotocol.info/docs/tutorials/building-a-client-node/)
    * [Writing Effective Tools for Agents: Complete MCP Development Guide](https://modelcontextprotocol.info/docs/tutorials/writing-effective-tools/)

  * [MCP Server Ecosystem: From Proof-of-Concept to Production](https://modelcontextprotocol.info/docs/examples/)
  * [Clients](https://modelcontextprotocol.info/docs/clients/)
  * [MCP FAQ: Expert Answers to Real-World Questions](https://modelcontextprotocol.info/docs/faqs/)
  * [MCP Best Practices: Architecture & Implementation Guide](https://modelcontextprotocol.info/docs/best-practices/)
  * [SDK ](https://modelcontextprotocol.info/docs/sdk/)

    * [Java SDK ](https://modelcontextprotocol.info/docs/sdk/java/)

      * [Overview](https://modelcontextprotocol.info/docs/sdk/java/mcp-overview/)
      * [MCP Server](https://modelcontextprotocol.info/docs/sdk/java/mcp-server/)
      * [MCP Client](https://modelcontextprotocol.info/docs/sdk/java/mcp-client/)

  * [Build an MCP Client (Core)](https://modelcontextprotocol.info/docs/development/build-client/)
  * More
  * [Docs ‚Üó](https://modelcontextprotocol.info/docs/)
  * [Specification ‚Üó](https://modelcontextprotocol.info/specification/)
  * [About](https://modelcontextprotocol.info/about)



English

  * [English](https://modelcontextprotocol.info/docs/quickstart/server/)
  * [ÁÆÄ‰Ωì‰∏≠Êñá](https://modelcontextprotocol.info/zh-cn/docs/quickstart/server/)
  * [ÁπÅÈ´î‰∏≠Êñá](https://modelcontextprotocol.info/zh-tw/docs/quickstart/server/)
  * [ÌïúÍµ≠Ïñ¥](https://modelcontextprotocol.info/ko/docs/quickstart/server/)



  * Light 

  * Dark 

  * System 




On this page

  * What we‚Äôll be building
  * Core MCP Concepts
  * Test with commands
  * What‚Äôs happening under the hood
  * Troubleshooting
  * Next steps



Scroll to top

[MCP Docs](https://modelcontextprotocol.info/docs/)

[Quickstart](https://modelcontextprotocol.info/docs/quickstart/)

For Server Developers

# For Server Developers

In this tutorial, we'll build a simple MCP weather server and connect it to a host, Claude for Desktop. We'll start with a basic setup, and then progress to more complex use cases.

### What we'll be building

Many LLMs (including Claude) do not currently have the ability to fetch the forecast and severe weather alerts. Let's use MCP to solve that!

We'll build a server that exposes two tools: `get-alerts` and `get-forecast`. Then we'll connect the server to an MCP host (in this case, Claude for Desktop):

Weather Alerts Tool Demo

Current Weather Tool Demo

Servers can connect to any client. We've chosen Claude for Desktop here for simplicity, but we also have guides on [building your own client](https://modelcontextprotocol.info/docs/quickstart/client/) as well as a [list of other clients here](https://modelcontextprotocol.info/docs/clients/).

**Why Claude for Desktop and not Claude.ai?**

Because servers are locally run, MCP currently only supports desktop hosts. Remote hosts are in active development.

### Core MCP Concepts

MCP servers can provide three main types of capabilities:

  1. **Resources** : File-like data that can be read by clients (like API responses or file contents)
  2. **Tools** : Functions that can be called by the LLM (with user approval)
  3. **Prompts** : Pre-written templates that help users accomplish specific tasks



This tutorial will primarily focus on tools.

PythonNodeJava

Let's get started with building our weather server! [You can find the complete code for what we'll be building here.](https://github.com/modelcontextprotocol/quickstart-resources/tree/main/weather-server-python)

### Prerequisite knowledge

This quickstart assumes you have familiarity with:

  * Python
  * LLMs like Claude



### System requirements

  * Python 3.10 or higher installed.
  * You must use the Python MCP SDK 1.2.0 or higher.



### Set up your environment

First, let's install `uv` and set up our Python project and environment:

ÂÆâË£Ö uv
    
    
    curl -LsSf https://astral.sh/uv/install.sh | sh
    
    
    powershell -ExecutionPolicy ByPass -c "irm https://astral.sh/uv/install.ps1 | iex"

Make sure to restart your terminal afterwards to ensure that the `uv` command gets picked up.

Now, let's create and set up our project:

create project
    
    
    # Create a new directory for our project
    uv init weather
    cd weather
    
    # Create virtual environment and activate it
    uv venv
    source .venv/bin/activate
    
    # Install dependencies
    uv add "mcp[cli]" httpx
    
    # Create our server file
    touch weather.py
    
    
    # Create a new directory for our project
    uv init weather
    cd weather
    
    # Create virtual environment and activate it
    uv venv
    .venv\Scripts\activate
    
    # Install dependencies
    uv add mcp[cli] httpx
    
    # Create our server file
    new-item weather.py

Now let's dive into building your server.

## Building your server

### Importing packages and setting up the instance

Add these to the top of your `weather.py`:
    
    
    from typing import Any
    import httpx
    from mcp.server.fastmcp import FastMCP
    
    # Initialize FastMCP server
    mcp = FastMCP("weather")
    
    # Constants
    NWS_API_BASE = "https://api.weather.gov"
    USER_AGENT = "weather-app/1.0"

The FastMCP class uses Python type hints and docstrings to automatically generate tool definitions, making it easy to create and maintain MCP tools.

### Helper functions

Next, let's add our helper functions for querying and formatting the data from the National Weather Service API:
    
    
    async def make_nws_request(url: str) -> dict[str, Any] | None:
        """Make a request to the NWS API with proper error handling."""
        headers = {
            "User-Agent": USER_AGENT,
            "Accept": "application/geo+json"
        }
        async with httpx.AsyncClient() as client:
            try:
                response = await client.get(url, headers=headers, timeout=30.0)
                response.raise_for_status()
                return response.json()
            except Exception:
                return None
    
    def format_alert(feature: dict) -> str:
        """Format an alert feature into a readable string."""
        props = feature["properties"]
        return f"""
    Event: {props.get('event', 'Unknown')}
    Area: {props.get('areaDesc', 'Unknown')}
    Severity: {props.get('severity', 'Unknown')}
    Description: {props.get('description', 'No description available')}
    Instructions: {props.get('instruction', 'No specific instructions provided')}
    """

### Implementing tool execution

The tool execution handler is responsible for actually executing the logic of each tool. Let's add it:
    
    
    @mcp.tool()
    async def get_alerts(state: str) -> str:
        """Get weather alerts for a US state.
    
        Args:
            state: Two-letter US state code (e.g. CA, NY)
        """
        url = f"{NWS_API_BASE}/alerts/active/area/{state}"
        data = await make_nws_request(url)
    
        if not data or "features" not in data:
            return "Unable to fetch alerts or no alerts found."
    
        if not data["features"]:
            return "No active alerts for this state."
    
        alerts = [format_alert(feature) for feature in data["features"]]
        return "\n---\n".join(alerts)
    
    @mcp.tool()
    async def get_forecast(latitude: float, longitude: float) -> str:
        """Get weather forecast for a location.
    
        Args:
            latitude: Latitude of the location
            longitude: Longitude of the location
        """
        # First get the forecast grid endpoint
        points_url = f"{NWS_API_BASE}/points/{latitude},{longitude}"
        points_data = await make_nws_request(points_url)
    
        if not points_data:
            return "Unable to fetch forecast data for this location."
    
        # Get the forecast URL from the points response
        forecast_url = points_data["properties"]["forecast"]
        forecast_data = await make_nws_request(forecast_url)
    
        if not forecast_data:
            return "Unable to fetch detailed forecast."
    
        # Format the periods into a readable forecast
        periods = forecast_data["properties"]["periods"]
        forecasts = []
        for period in periods[:5]:  # Only show next 5 periods
            forecast = f"""
    {period['name']}:
    Temperature: {period['temperature']}¬∞{period['temperatureUnit']}
    Wind: {period['windSpeed']} {period['windDirection']}
    Forecast: {period['detailedForecast']}
    """
            forecasts.append(forecast)
    
        return "\n---\n".join(forecasts)

### Running the server

Finally, let's initialize and run the server:
    
    
    if __name__ == "__main__":
        # Initialize and run the server
        mcp.run(transport='stdio')

Your server is complete! Run `uv run weather.py` to confirm that everything's working.

Let's now test your server from an existing MCP host, Claude for Desktop.

## Testing your server with Claude for Desktop

Claude for Desktop is not yet available on Linux. Linux users can proceed to the [Building a client](https://modelcontextprotocol.info/docs/quickstart/client/) tutorial to build an MCP client that connects to the server we just built.

First, make sure you have Claude for Desktop installed. [You can install the latest version here.](https://claude.ai/download) If you already have Claude for Desktop, **make sure it 's updated to the latest version.**

We'll need to configure Claude for Desktop for whichever MCP servers you want to use. To do this, open your Claude for Desktop App configuration at `~/Library/Application Support/Claude/claude_desktop_config.json` in a text editor. Make sure to create the file if it doesn't exist.

For example, if you have [VS Code](https://code.visualstudio.com/) installed:

Open configuration file
    
    
    code ~/Library/Application\ Support/Claude/claude_desktop_config.json
    
    
    code $env:AppData\Claude\claude_desktop_config.json

You'll then add your servers in the `mcpServers` key. The MCP UI elements will only show up in Claude for Desktop if at least one server is properly configured.

In this case, we'll add our single weather server like so:

Configure Claude for Desktop
    
    
    {
        "mcpServers": {
            "weather": {
                "command": "uv",
                "args": [
                    "--directory",
                    "/ABSOLUTE/PATH/TO/PARENT/FOLDER/weather",
                    "run",
                    "weather.py"
                ]
            }
        }
    }
    
    
    {
        "mcpServers": {
            "weather": {
                "command": "uv",
                "args": [
                    "--directory",
                    "C:\\ABSOLUTE\\PATH\\TO\\PARENT\\FOLDER\\weather",
                    "run",
                    "weather.py"
                ]
            }
        }
    }

You may need to put the full path to the `uv` executable in the `command` field. You can get this by running `which uv` on MacOS/Linux or `where uv` on Windows.

Make sure you pass in the absolute path to your server.

This tells Claude for Desktop:

  1. There's an MCP server named "weather"
  2. To launch it by running `uv --directory /ABSOLUTE/PATH/TO/PARENT/FOLDER/weather run weather`



Save the file, and restart **Claude for Desktop**.

Let's get started with building our weather server! [You can find the complete code for what we'll be building here.](https://github.com/modelcontextprotocol/quickstart-resources/tree/main/weather-server-typescript)

### Prerequisite knowledge

This quickstart assumes you have familiarity with:

  * TypeScript
  * LLMs like Claude



### System requirements

For TypeScript, make sure you have the latest version of Node installed.

### Set up your environment

First, let's install Node.js and npm if you haven't already. You can download them from [nodejs.org](https://nodejs.org/). Verify your Node.js installation:
    
    
    node --version
    npm --version

For this tutorial, you'll need Node.js version 16 or higher.

Now, let's create and set up our project:

ÂàõÂª∫È°πÁõÆ
    
    
    # Create a new directory for our project
    mkdir weather
    cd weather
    
    # Initialize a new npm project
    npm init -y
    
    # Install dependencies
    npm install @modelcontextprotocol/sdk zod
    npm install -D @types/node typescript
    
    # Create our files
    mkdir src
    touch src/index.ts
    
    
    # Create a new directory for our project
    md weather
    cd weather
    
    # Initialize a new npm project
    npm init -y
    
    # Install dependencies
    npm install @modelcontextprotocol/sdk zod
    npm install -D @types/node typescript
    
    # Create our files
    md src
    new-item src\index.ts

Update your package.json to add type: "module" and a build script:
    
    
    {
      "type": "module",
      "bin": {
        "weather": "./build/index.js"
      },
      "scripts": {
        "build": "tsc && node -e \"require('fs').chmodSync('build/index.js', '755')\"",
      },
      "files": [
        "build"
      ],
    }

Create a `tsconfig.json` in the root of your project:
    
    
    {
      "compilerOptions": {
        "target": "ES2022",
        "module": "Node16",
        "moduleResolution": "Node16",
        "outDir": "./build",
        "rootDir": "./src",
        "strict": true,
        "esModuleInterop": true,
        "skipLibCheck": true,
        "forceConsistentCasingInFileNames": true
      },
      "include": ["src/**/*"],
      "exclude": ["node_modules"]
    }

Now let's dive into building your server.

## Building your server

### Importing packages and setting up the instance

Add these to the top of your `src/index.ts`:
    
    
    import { McpServer } from "@modelcontextprotocol/sdk/server/mcp.js";
    import { StdioServerTransport } from "@modelcontextprotocol/sdk/server/stdio.js";
    import { z } from "zod";
    
    const NWS_API_BASE = "https://api.weather.gov";
    const USER_AGENT = "weather-app/1.0";
    
    // Create server instance
    const server = new McpServer({
      name: "weather",
      version: "1.0.0",
    });

### Helper functions

Next, let's add our helper functions for querying and formatting the data from the National Weather Service API:
    
    
    // Helper function for making NWS API requests
    async function makeNWSRequest<T>(url: string): Promise<T | null> {
      const headers = {
        "User-Agent": USER_AGENT,
        Accept: "application/geo+json",
      };
    
      try {
        const response = await fetch(url, { headers });
        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }
        return (await response.json()) as T;
      } catch (error) {
        console.error("Error making NWS request:", error);
        return null;
      }
    }
    
    interface AlertFeature {
      properties: {
        event?: string;
        areaDesc?: string;
        severity?: string;
        status?: string;
        headline?: string;
      };
    }
    
    // Format alert data
    function formatAlert(feature: AlertFeature): string {
      const props = feature.properties;
      return [
        `Event: ${props.event || "Unknown"}`,
        `Area: ${props.areaDesc || "Unknown"}`,
        `Severity: ${props.severity || "Unknown"}`,
        `Status: ${props.status || "Unknown"}`,
        `Headline: ${props.headline || "No headline"}`,
        "---",
      ].join("\n");
    }
    
    interface ForecastPeriod {
      name?: string;
      temperature?: number;
      temperatureUnit?: string;
      windSpeed?: string;
      windDirection?: string;
      shortForecast?: string;
    }
    
    interface AlertsResponse {
      features: AlertFeature[];
    }
    
    interface PointsResponse {
      properties: {
        forecast?: string;
      };
    }
    
    interface ForecastResponse {
      properties: {
        periods: ForecastPeriod[];
      };
    }

### Implementing tool execution

The tool execution handler is responsible for actually executing the logic of each tool. Let's add it:
    
    
    // Register weather tools
    server.tool(
      "get-alerts",
      "Get weather alerts for a state",
      {
        state: z.string().length(2).describe("Two-letter state code (e.g. CA, NY)"),
      },
      async ({ state }) => {
        const stateCode = state.toUpperCase();
        const alertsUrl = `${NWS_API_BASE}/alerts?area=${stateCode}`;
        const alertsData = await makeNWSRequest<AlertsResponse>(alertsUrl);
    
        if (!alertsData) {
          return {
            content: [
              {
                type: "text",
                text: "Failed to retrieve alerts data",
              },
            ],
          };
        }
    
        const features = alertsData.features || [];
        if (features.length === 0) {
          return {
            content: [
              {
                type: "text",
                text: `No active alerts for ${stateCode}`,
              },
            ],
          };
        }
    
        const formattedAlerts = features.map(formatAlert);
        const alertsText = `Active alerts for ${stateCode}:\n\n${formattedAlerts.join("\n")}`;
    
        return {
          content: [
            {
              type: "text",
              text: alertsText,
            },
          ],
        };
      },
    );
    
    server.tool(
      "get-forecast",
      "Get weather forecast for a location",
      {
        latitude: z.number().min(-90).max(90).describe("Latitude of the location"),
        longitude: z.number().min(-180).max(180).describe("Longitude of the location"),
      },
      async ({ latitude, longitude }) => {
        // Get grid point data
        const pointsUrl = `${NWS_API_BASE}/points/${latitude.toFixed(4)},${longitude.toFixed(4)}`;
        const pointsData = await makeNWSRequest<PointsResponse>(pointsUrl);
    
        if (!pointsData) {
          return {
            content: [
              {
                type: "text",
                text: `Failed to retrieve grid point data for coordinates: ${latitude}, ${longitude}. This location may not be supported by the NWS API (only US locations are supported).`,
              },
            ],
          };
        }
    
        const forecastUrl = pointsData.properties?.forecast;
        if (!forecastUrl) {
          return {
            content: [
              {
                type: "text",
                text: "Failed to get forecast URL from grid point data",
              },
            ],
          };
        }
    
        // Get forecast data
        const forecastData = await makeNWSRequest<ForecastResponse>(forecastUrl);
        if (!forecastData) {
          return {
            content: [
              {
                type: "text",
                text: "Failed to retrieve forecast data",
              },
            ],
          };
        }
    
        const periods = forecastData.properties?.periods || [];
        if (periods.length === 0) {
          return {
            content: [
              {
                type: "text",
                text: "No forecast periods available",
              },
            ],
          };
        }
    
        // Format forecast periods
        const formattedForecast = periods.map((period: ForecastPeriod) =>
          [
            `${period.name || "Unknown"}:`,
            `Temperature: ${period.temperature || "Unknown"}¬∞${period.temperatureUnit || "F"}`,
            `Wind: ${period.windSpeed || "Unknown"} ${period.windDirection || ""}`,
            `${period.shortForecast || "No forecast available"}`,
            "---",
          ].join("\n"),
        );
    
        const forecastText = `Forecast for ${latitude}, ${longitude}:\n\n${formattedForecast.join("\n")}`;
    
        return {
          content: [
            {
              type: "text",
              text: forecastText,
            },
          ],
        };
      },
    );

### Running the server

Finally, implement the main function to run the server:
    
    
    async function main() {
      const transport = new StdioServerTransport();
      await server.connect(transport);
      console.error("Weather MCP Server running on stdio");
    }
    
    main().catch((error) => {
      console.error("Fatal error in main():", error);
      process.exit(1);
    });

Make sure to run `npm run build` to build your server! This is a very important step in getting your server to connect.

Let's now test your server from an existing MCP host, Claude for Desktop.

## Testing your server with Claude for Desktop

Claude for Desktop is not yet available on Linux. Linux users can proceed to the [Building a client](https://modelcontextprotocol.info/quickstart/client) tutorial to build an MCP client that connects to the server we just built.

First, make sure you have Claude for Desktop installed. [You can install the latest version here.](https://claude.ai/download) If you already have Claude for Desktop, **make sure it 's updated to the latest version.**

We'll need to configure Claude for Desktop for whichever MCP servers you want to use. To do this, open your Claude for Desktop App configuration at `~/Library/Application Support/Claude/claude_desktop_config.json` in a text editor. Make sure to create the file if it doesn't exist.

For example, if you have [VS Code](https://code.visualstudio.com/) installed:

Configure Claude for Desktop
    
    
    code ~/Library/Application\ Support/Claude/claude_desktop_config.json
    
    
    code $env:AppData\Claude\claude_desktop_config.json

You'll then add your servers in the `mcpServers` key. The MCP UI elements will only show up in Claude for Desktop if at least one server is properly configured.

In this case, we'll add our single weather server like so:

ÈÖçÁΩÆ Claude for Desktop
    
    
    {
        "mcpServers": {
            "weather": {
                "command": "node",
                "args": [
                    "/ABSOLUTE/PATH/TO/PARENT/FOLDER/weather/build/index.js"
                ]
            }
        }
    }
    
    
    {
        "mcpServers": {
            "weather": {
                "command": "node",
                "args": [
                    "C:\\PATH\\TO\\PARENT\\FOLDER\\weather\\build\\index.js"
                ]
            }
        }
    }

This tells Claude for Desktop:

  1. There's an MCP server named "weather"
  2. Launch it by running `node /ABSOLUTE/PATH/TO/PARENT/FOLDER/weather/build/index.js`



Save the file, and restart **Claude for Desktop**.

This is a quickstart demo based on Spring AI MCP auto-configuraiton and boot starters. To learn how to create sync and async MCP Servers, manually, consult the [Java SDK Server](https://modelcontextprotocol.info/sdk/java/mcp-server) documentation.

Let's get started with building our weather server! [You can find the complete code for what we'll be building here.](https://github.com/spring-projects/spring-ai-examples/tree/main/model-context-protocol/weather/starter-stdio-server)

For more information, see the [MCP Server Boot Starter](https://docs.spring.io/spring-ai/reference/api/mcp/mcp-server-boot-starter-docs.html) reference documentation. For manual MCP Server implementation, refer to the [MCP Server Java SDK documentation](https://modelcontextprotocol.info/sdk/java/mcp-server).

### System requirements

  * Java 17 or higher installed.
  * [Spring Boot 3.3.x](https://docs.spring.io/spring-boot/installing.html) or higher



### Set up your environment

Use the [Spring Initizer](https://start.spring.io/) to bootstrat the project.

You will need to add the following dependencies:

dependencies
    
    
    <dependencies>
          <dependency>
              <groupId>org.springframework.ai</groupId>
              <artifactId>spring-ai-mcp-server-spring-boot-starter</artifactId>
          </dependency>
    
          <dependency>
              <groupId>org.springframework</groupId>
              <artifactId>spring-web</artifactId>
          </dependency>
    </dependencies>
    
    
    dependencies {
      implementation platform("org.springframework.ai:spring-ai-mcp-server-spring-boot-starter")
      implementation platform("org.springframework:spring-web")   
    }

Then configure your application by setting the applicaiton properties:

configure application
    
    
    spring.main.bannerMode=off
    logging.pattern.console=
    
    
    logging:
      pattern:
        console:
    spring:
      main:
        banner-mode: off

The [Server Configuration Properties](https://docs.spring.io/spring-ai/reference/api/mcp/mcp-server-boot-starter-docs.html#_configuration_properties) documents all available properties.

Now let's dive into building your server.

## Building your server

### Weather Service

Let's implement a [WeatheService.java](https://github.com/spring-projects/spring-ai-examples/blob/main/model-context-protocol/weather/starter-stdio-server/src/main/java/org/springframework/ai/mcp/sample/server/WeatherService.java) that uses a REST client to query the data from the National Weather Service API:
    
    
    @Service
    public class WeatherService {
    
    	private final RestClient restClient;
    
    	public WeatherService() {
    		this.restClient = RestClient.builder()
    			.baseUrl("https://api.weather.gov")
    			.defaultHeader("Accept", "application/geo+json")
    			.defaultHeader("User-Agent", "WeatherApiClient/1.0 ([[email¬†protected]](/cdn-cgi/l/email-protection))")
    			.build();
    	}
    
      @Tool(description = "Get weather forecast for a specific latitude/longitude")
      public String getWeatherForecastByLocation(
          double latitude,   // Latitude coordinate
          double longitude   // Longitude coordinate
      ) {
          // Returns detailed forecast including:
          // - Temperature and unit
          // - Wind speed and direction
          // - Detailed forecast description
      }
    	
      @Tool(description = "Get weather alerts for a US state")
      public String getAlerts(
          @ToolParam(description = "Two-letter US state code (e.g. CA, NY") String state)
      ) {
          // Returns active alerts including:
          // - Event type
          // - Affected area
          // - Severity
          // - Description
          // - Safety instructions
      }
    
      // ......
    }

The `@Service` annotation with auto-register the service in your applicaiton context. The Spring AI `@Tool` annotation, making it easy to create and maintain MCP tools.

The auto-configuration will automatically register these tools with the MCP server.

### Create your Boot Applicaiton
    
    
    @SpringBootApplication
    public class McpServerApplication {
    
    	public static void main(String[] args) {
    		SpringApplication.run(McpServerApplication.class, args);
    	}
    
    	@Bean
    	public ToolCallbackProvider weatherTools(WeatherService weatherService) {
    		return  MethodToolCallbackProvider.builder().toolObjects(weatherService).build();
    	}
    }

Uses the the `MethodToolCallbackProvider` utils to convert the `@Tools` into actionalble callbackes used by the MCP server.

### Running the server

Finally, let's build the server:
    
    
    ./mvnw clean install

This will generate a `mcp-weather-stdio-server-0.0.1-SNAPSHOT.jar` file within the `target` folder.

Let's now test your server from an existing MCP host, Claude for Desktop.

## Testing your server with Claude for Desktop

Claude for Desktop is not yet available on Linux.

First, make sure you have Claude for Desktop installed. [You can install the latest version here.](https://claude.ai/download) If you already have Claude for Desktop, **make sure it 's updated to the latest version.**

We'll need to configure Claude for Desktop for whichever MCP servers you want to use. To do this, open your Claude for Desktop App configuration at `~/Library/Application Support/Claude/claude_desktop_config.json` in a text editor. Make sure to create the file if it doesn't exist.

For example, if you have [VS Code](https://code.visualstudio.com/) installed:

Open configuration file
    
    
    code ~/Library/Application\ Support/Claude/claude_desktop_config.json
    
    
    code $env:AppData\Claude\claude_desktop_config.json

You'll then add your servers in the `mcpServers` key. The MCP UI elements will only show up in Claude for Desktop if at least one server is properly configured.

In this case, we'll add our single weather server like so:

Add single weather server
    
    
    {
      "mcpServers": {
        "spring-ai-mcp-weather": {
          "command": "java",
          "args": [
            "-Dspring.ai.mcp.server.stdio=true",
            "-jar",
            "/ABSOLUTE/PATH/TO/PARENT/FOLDER/mcp-weather-stdio-server-0.0.1-SNAPSHOT.jar"
          ]
        }
      }
    }
    
    
    {
      "mcpServers": {
        "spring-ai-mcp-weather": {
          "command": "java",
          "args": [
            "-Dspring.ai.mcp.server.transport=STDIO",
            "-jar",
            "C:\\ABSOLUTE\\PATH\\TO\\PARENT\\FOLDER\\weather\\mcp-weather-stdio-server-0.0.1-SNAPSHOT.jar"
          ]
        }
      }
    }

Make sure you pass in the absolute path to your server.

This tells Claude for Desktop:

  1. There's an MCP server named "my-weather-server"
  2. To launch it by running `java -jar /ABSOLUTE/PATH/TO/PARENT/FOLDER/mcp-weather-stdio-server-0.0.1-SNAPSHOT.jar`



Save the file, and restart **Claude for Desktop**.

## Testing your server with Java client

### Create a MCP Client manually

Use the `McpClient` to connect to the server:
    
    
    var stdioParams = ServerParameters.builder("java")
      .args("-jar", "/ABSOLUTE/PATH/TO/PARENT/FOLDER/mcp-weather-stdio-server-0.0.1-SNAPSHOT.jar")
      .build();
    
    var stdioTransport = new StdioClientTransport(stdioParams);
    
    var mcpClient = McpClient.sync(stdioTransport).build();
    
    mcpClient.initialize();
    
    ListToolsResult toolsList = mcpClient.listTools();
    
    CallToolResult weather = mcpClient.callTool(
      new CallToolRequest("getWeatherForecastByLocation",
          Map.of("latitude", "47.6062", "longitude", "-122.3321")));
    
    CallToolResult alert = mcpClient.callTool(
      new CallToolRequest("getAlerts", Map.of("state", "NY")));
    
    mcpClient.closeGracefully();

### Use MCP Client Boot Starter

Create a new boot starter applicaiton using the `spring-ai-mcp-client-spring-boot-starter` dependency:
    
    
    <dependency>
        <groupId>org.springframework.ai</groupId>
        <artifactId>spring-ai-mcp-client-spring-boot-starter</artifactId>
    </dependency>

and set the `spring.ai.mcp.client.stdio.servers-configuration` property to point to your `claude_desktop_config.json`. You can re-use the existing Anthropic Destop configuration:
    
    
    spring.ai.mcp.client.stdio.servers-configuration=file:PATH/TO/claude_desktop_config.json

When you stasrt your client applicaiton, the auto-configuration will create, automatically MCP clients from the claude_desktop_config.json.

For more information, see the [MCP Client Boot Starters](https://docs.spring.io/spring-ai/reference/api/mcp/mcp-server-boot-client-docs.html) reference documentation.

## More Java MCP Server examples

The [starter-webflux-server](https://github.com/spring-projects/spring-ai-examples/tree/main/model-context-protocol/weather/starter-webflux-server) demonstrates how to create a MCP server using SSE transport. It showcases how to define and register MCP Tools, Resources, and Prompts, using the Spring Boot's auto-configuration capabilities.

### Test with commands

Let's make sure Claude for Desktop is picking up the two tools we've exposed in our `weather` server. You can do this by looking for the hammericon:

Visual indicator for MCP tools

After clicking on the hammer icon, you should see two tools listed:

Available MCP tools

If your server isn't being picked up by Claude for Desktop, proceed to the Troubleshooting section for debugging tips.

If the hammer icon has shown up, you can now test your server by running the following commands in Claude for Desktop:

  * What's the weather in Sacramento?
  * What are the active weather alerts in Texas?



Current Weather Example

Weather Alerts Example

Since this is the US National Weather service, the queries will only work for US locations.

## What's happening under the hood

When you ask a question:

  1. The client sends your question to Claude
  2. Claude analyzes the available tools and decides which one(s) to use
  3. The client executes the chosen tool(s) through the MCP server
  4. The results are sent back to Claude
  5. Claude formulates a natural language response
  6. The response is displayed to you!



## Troubleshooting

**Claude for Desktop Integration Issues**

**Getting logs from Claude for Desktop**

Claude.app logging related to MCP is written to log files in `~/Library/Logs/Claude`:

  * `mcp.log` will contain general logging about MCP connections and connection failures.
  * Files named `mcp-server-SERVERNAME.log` will contain error (stderr) logging from the named server.



You can run the following command to list recent logs and follow along with any new ones:
    
    
    # Check Claude's logs for errors
    tail -n 20 -f ~/Library/Logs/Claude/mcp*.log

**Server not showing up in Claude**

  1. Check your `claude_desktop_config.json` file syntax
  2. Make sure the path to your project is absolute and not relative
  3. Restart Claude for Desktop completely



**Tool calls failing silently**

If Claude attempts to use the tools but they fail:

  1. Check Claude's logs for errors
  2. Verify your server builds and runs without errors
  3. Try restarting Claude for Desktop



**None of this is working. What do I do?**

Please refer to our [debugging guide](https://modelcontextprotocol.info/docs/tools/debugging) for better debugging tools and more detailed guidance.

**Weather API Issues**

**Error: Failed to retrieve grid point data**

This usually means either:

  1. The coordinates are outside the US
  2. The NWS API is having issues
  3. You're being rate limited



Fix:

  * Verify you're using US coordinates
  * Add a small delay between requests
  * Check the NWS API status page



**Error: No active alerts for [STATE]**

This isn't an error - it just means there are no current weather alerts for that state. Try a different state or check during severe weather.

üìö

For more advanced troubleshooting, check out our guide on [Debugging MCP](https://modelcontextprotocol.info/docs/tools/debugging)

## Next steps

[Building a clientLearn how to build your own MCP client that can connect to your server](https://modelcontextprotocol.info/docs/quickstart/client)[Example serversCheck out our gallery of official MCP servers and implementations](https://modelcontextprotocol.info/docs/examples)[Debugging GuideLearn how to effectively debug MCP servers and integrations](https://modelcontextprotocol.info/tools/debugging)[Building MCP with LLMsLearn how to use LLMs like Claude to speed up your MCP development](https://modelcontextprotocol.info/building-mcp-with-llms)

[Guide](https://modelcontextprotocol.info/docs/quickstart/guide/ "Guide")[For Client Developers](https://modelcontextprotocol.info/docs/quickstart/client/ "For Client Developers")

[Model Context Protocol Hub ](https://modelcontextprotocol.info "Model Context Protocol")[MCP ‰∏≠ÊñáÁ´ô ](https://mcpcn.com "MCP ‰∏≠ÊñáÁ§æÂå∫")[A2A Protocol ](https://a2acn.com "A2A Protocol Community")[AP2 Lab ](https://ap2lab.com "Agent Payments Protocol Community")[ACP Protocol ](https://acplib.com "Agentic Commerce Protocol Community")[Agent2Agent ÊñáÊ°£ ](https://agent2agent.info "Agent2Agent Protocol")[AI to Sora ](https://aitosora.com "AI to Sora")[ChatGPT ‰∏≠Êñá](https://chatgptcn.com "ChatGPT ‰∏≠ÊñáÁ§æÂå∫")

[Powered by ModelContextProtocol](https://github.com/imfing/hextra "Hextra GitHub Homepage")

¬© 2024 ModelContextProtocol.Info.
