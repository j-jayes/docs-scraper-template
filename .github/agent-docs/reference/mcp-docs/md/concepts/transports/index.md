[ Model Context Protocol （MCP） ](https://modelcontextprotocol.info/)[Home ](https://modelcontextprotocol.info/)[Documentation ](https://modelcontextprotocol.info/docs/)[Specification ](https://modelcontextprotocol.info/specification/)[Tools ](https://modelcontextprotocol.info/tools/)[Blog](https://modelcontextprotocol.info/blog/)

`CTRL K`




`CTRL K`




  * [MCP Docs ](https://modelcontextprotocol.info/docs/)

    * [Understanding Model Context Protocol (MCP)](https://modelcontextprotocol.info/docs/introduction/)
    * [MCP Learning Path: From Zero to Hero](https://modelcontextprotocol.info/docs/learning-path/)
    * [Quickstart ](https://modelcontextprotocol.info/docs/quickstart/)

      * [Guide](https://modelcontextprotocol.info/docs/quickstart/guide/)
      * [For Server Developers](https://modelcontextprotocol.info/docs/quickstart/server/)
      * [For Client Developers](https://modelcontextprotocol.info/docs/quickstart/client/)
      * [Your First MCP Experience: 5-Minute Setup](https://modelcontextprotocol.info/docs/quickstart/user/)
      * [Quickstart](https://modelcontextprotocol.info/docs/quickstart/quickstart/)

    * [Core Concepts ](https://modelcontextprotocol.info/docs/concepts/)

      * [MCP Architecture: Design Philosophy & Engineering Principles](https://modelcontextprotocol.info/docs/concepts/architecture/)
      * [Prompts](https://modelcontextprotocol.info/docs/concepts/prompts/)
      * [Resources](https://modelcontextprotocol.info/docs/concepts/resources/)
      * [Roots](https://modelcontextprotocol.info/docs/concepts/roots/)
      * [Sampling](https://modelcontextprotocol.info/docs/concepts/sampling/)
      * [Tools](https://modelcontextprotocol.info/docs/concepts/tools/)
      * [Transports](https://modelcontextprotocol.info/docs/concepts/transports/)
        * Message Format
        * Built-in Transport Types
        * Custom Transports
        * Error Handling
        * Best Practices
        * Security Considerations
        * Debugging Transport

    * [MCP Tutorials: From Concept to Production ](https://modelcontextprotocol.info/docs/tutorials/)

      * [Building MCP with LLMs](https://modelcontextprotocol.info/docs/tutorials/building-mcp-with-llms/)
      * [Building MCP clients-Python](https://modelcontextprotocol.info/docs/tutorials/building-a-client/)
      * [Building MCP clients-Node.js](https://modelcontextprotocol.info/docs/tutorials/building-a-client-node/)
      * [Writing Effective Tools for Agents: Complete MCP Development Guide](https://modelcontextprotocol.info/docs/tutorials/writing-effective-tools/)

    * [MCP Server Ecosystem: From Proof-of-Concept to Production](https://modelcontextprotocol.info/docs/examples/)
    * [Clients](https://modelcontextprotocol.info/docs/clients/)
    * [MCP FAQ: Expert Answers to Real-World Questions](https://modelcontextprotocol.info/docs/faqs/)
    * [MCP Best Practices: Architecture & Implementation Guide](https://modelcontextprotocol.info/docs/best-practices/)
    * [SDK ](https://modelcontextprotocol.info/docs/sdk/)

      * [Java SDK ](https://modelcontextprotocol.info/docs/sdk/java/)

        * [Overview](https://modelcontextprotocol.info/docs/sdk/java/mcp-overview/)
        * [MCP Server](https://modelcontextprotocol.info/docs/sdk/java/mcp-server/)
        * [MCP Client](https://modelcontextprotocol.info/docs/sdk/java/mcp-client/)

    * [Build an MCP Client (Core)](https://modelcontextprotocol.info/docs/development/build-client/)

  * [Tools ](https://modelcontextprotocol.info/tools/)

    * [MCP Registry ](https://modelcontextprotocol.info/tools/registry/)

      * [Publish Your MCP Server](https://modelcontextprotocol.info/tools/registry/publishing/)
      * [Registry CLI Tool](https://modelcontextprotocol.info/tools/registry/cli/)
      * [GitHub Actions 自动化发布](https://modelcontextprotocol.info/tools/registry/github-actions/)
      * [消费 Registry 数据](https://modelcontextprotocol.info/tools/registry/consuming/)
      * [Registry FAQ](https://modelcontextprotocol.info/tools/registry/faq/)

    * [Debugging](https://modelcontextprotocol.info/tools/debugging/)
    * [Inspector](https://modelcontextprotocol.info/tools/inspector/)
    * [测试](https://modelcontextprotocol.info/tools/test/)

  * [Specification ](https://modelcontextprotocol.info/specification/)

    * [Specification (Draft) ](https://modelcontextprotocol.info/specification/draft/)

      * [Architecture](https://modelcontextprotocol.info/specification/draft/architecture/)
      * [Base Protocol ](https://modelcontextprotocol.info/specification/draft/basic/)

        * [Transports](https://modelcontextprotocol.info/specification/draft/basic/transports/)
        * [Authorization](https://modelcontextprotocol.info/specification/draft/basic/authorization/)
        * [Messages](https://modelcontextprotocol.info/specification/draft/basic/messages/)
        * [Lifecycle](https://modelcontextprotocol.info/specification/draft/basic/lifecycle/)
        * [Versioning](https://modelcontextprotocol.info/specification/draft/basic/versioning/)
        * [Utilities ](https://modelcontextprotocol.info/specification/draft/basic/utilities/)

          * [Ping](https://modelcontextprotocol.info/specification/draft/basic/utilities/ping/)
          * [Cancellation](https://modelcontextprotocol.info/specification/draft/basic/utilities/cancellation/)
          * [Progress](https://modelcontextprotocol.info/specification/draft/basic/utilities/progress/)

      * [Server Features ](https://modelcontextprotocol.info/specification/draft/server/)

        * [Prompts](https://modelcontextprotocol.info/specification/draft/server/prompts/)
        * [Resources](https://modelcontextprotocol.info/specification/draft/server/resources/)
        * [Tools](https://modelcontextprotocol.info/specification/draft/server/tools/)
        * [Utilities ](https://modelcontextprotocol.info/specification/draft/server/utilities/)

          * [Completion](https://modelcontextprotocol.info/specification/draft/server/utilities/completion/)
          * [Logging](https://modelcontextprotocol.info/specification/draft/server/utilities/logging/)
          * [Pagination](https://modelcontextprotocol.info/specification/draft/server/utilities/pagination/)

      * [Client Features ](https://modelcontextprotocol.info/specification/draft/client/)

        * [Roots](https://modelcontextprotocol.info/specification/draft/client/roots/)
        * [Sampling](https://modelcontextprotocol.info/specification/draft/client/sampling/)

      * [Contributions](https://modelcontextprotocol.info/specification/draft/contributing/)
      * [Revisions ](https://modelcontextprotocol.info/specification/draft/revisions/)

        * [2024-11-05 (Current)](https://modelcontextprotocol.info/specification/draft/revisions/2024-11-05/)

    * [Specification (Latest) ](https://modelcontextprotocol.info/specification/2024-11-05/)

      * [Architecture](https://modelcontextprotocol.info/specification/2024-11-05/architecture/)
      * [Base Protocol ](https://modelcontextprotocol.info/specification/2024-11-05/basic/)

        * [Messages](https://modelcontextprotocol.info/specification/2024-11-05/basic/messages/)
        * [Lifecycle](https://modelcontextprotocol.info/specification/2024-11-05/basic/lifecycle/)
        * [Transports](https://modelcontextprotocol.info/specification/2024-11-05/basic/transports/)
        * [Versioning](https://modelcontextprotocol.info/specification/2024-11-05/basic/versioning/)
        * [Utilities ](https://modelcontextprotocol.info/specification/2024-11-05/basic/utilities/)

          * [Ping](https://modelcontextprotocol.info/specification/2024-11-05/basic/utilities/ping/)
          * [Cancellation](https://modelcontextprotocol.info/specification/2024-11-05/basic/utilities/cancellation/)
          * [Progress](https://modelcontextprotocol.info/specification/2024-11-05/basic/utilities/progress/)

      * [Server Features ](https://modelcontextprotocol.info/specification/2024-11-05/server/)

        * [Prompts](https://modelcontextprotocol.info/specification/2024-11-05/server/prompts/)
        * [Resources](https://modelcontextprotocol.info/specification/2024-11-05/server/resources/)
        * [Tools](https://modelcontextprotocol.info/specification/2024-11-05/server/tools/)
        * [Utilities ](https://modelcontextprotocol.info/specification/2024-11-05/server/utilities/)

          * [Completion](https://modelcontextprotocol.info/specification/2024-11-05/server/utilities/completion/)
          * [Logging](https://modelcontextprotocol.info/specification/2024-11-05/server/utilities/logging/)
          * [Pagination](https://modelcontextprotocol.info/specification/2024-11-05/server/utilities/pagination/)

      * [Client Features ](https://modelcontextprotocol.info/specification/2024-11-05/client/)

        * [Roots](https://modelcontextprotocol.info/specification/2024-11-05/client/roots/)
        * [Sampling](https://modelcontextprotocol.info/specification/2024-11-05/client/sampling/)

      * [Contributions](https://modelcontextprotocol.info/specification/2024-11-05/contributing/)
      * [Revisions ](https://modelcontextprotocol.info/specification/2024-11-05/revisions/)

        * [2024-11-05 (Current)](https://modelcontextprotocol.info/specification/2024-11-05/revisions/2024-11-05/)

  * [MCP Protocol Blog ](https://modelcontextprotocol.info/blog/)

    * [Mastering MCP Tool Development: Unlocking AI Agent Potential](https://modelcontextprotocol.info/blog/writing-effective-mcp-tools/)
    * [Update on the Next MCP Protocol Release](https://modelcontextprotocol.info/blog/mcp-next-version-update/)
    * [Chrome DevTools MCP: Giving AI Coding Assistants Eyes to See Beyond Blind Programming](https://modelcontextprotocol.info/blog/chrome-devtools-mcp-ai-debugging/)
    * [Model Context Protocol (MCP): A New Standard for AI Application and External Data Integration](https://modelcontextprotocol.info/blog/mcp-guide/)
    * [一文读懂MCP协议：大模型AI-Agent的USB-C接口](https://modelcontextprotocol.info/blog/understanding-mcp-protocol/)

  * [About](https://modelcontextprotocol.info/about/)
  * More
  * [Docs ↗](https://modelcontextprotocol.info/docs/)
  * [Specification ↗](https://modelcontextprotocol.info/specification/)
  * [About](https://modelcontextprotocol.info/about)


  * [Understanding Model Context Protocol (MCP)](https://modelcontextprotocol.info/docs/introduction/)
  * [MCP Learning Path: From Zero to Hero](https://modelcontextprotocol.info/docs/learning-path/)
  * [Quickstart ](https://modelcontextprotocol.info/docs/quickstart/)

    * [Guide](https://modelcontextprotocol.info/docs/quickstart/guide/)
    * [For Server Developers](https://modelcontextprotocol.info/docs/quickstart/server/)
    * [For Client Developers](https://modelcontextprotocol.info/docs/quickstart/client/)
    * [Your First MCP Experience: 5-Minute Setup](https://modelcontextprotocol.info/docs/quickstart/user/)
    * [Quickstart](https://modelcontextprotocol.info/docs/quickstart/quickstart/)

  * [Core Concepts ](https://modelcontextprotocol.info/docs/concepts/)

    * [MCP Architecture: Design Philosophy & Engineering Principles](https://modelcontextprotocol.info/docs/concepts/architecture/)
    * [Prompts](https://modelcontextprotocol.info/docs/concepts/prompts/)
    * [Resources](https://modelcontextprotocol.info/docs/concepts/resources/)
    * [Roots](https://modelcontextprotocol.info/docs/concepts/roots/)
    * [Sampling](https://modelcontextprotocol.info/docs/concepts/sampling/)
    * [Tools](https://modelcontextprotocol.info/docs/concepts/tools/)
    * [Transports](https://modelcontextprotocol.info/docs/concepts/transports/)

  * [MCP Tutorials: From Concept to Production ](https://modelcontextprotocol.info/docs/tutorials/)

    * [Building MCP with LLMs](https://modelcontextprotocol.info/docs/tutorials/building-mcp-with-llms/)
    * [Building MCP clients-Python](https://modelcontextprotocol.info/docs/tutorials/building-a-client/)
    * [Building MCP clients-Node.js](https://modelcontextprotocol.info/docs/tutorials/building-a-client-node/)
    * [Writing Effective Tools for Agents: Complete MCP Development Guide](https://modelcontextprotocol.info/docs/tutorials/writing-effective-tools/)

  * [MCP Server Ecosystem: From Proof-of-Concept to Production](https://modelcontextprotocol.info/docs/examples/)
  * [Clients](https://modelcontextprotocol.info/docs/clients/)
  * [MCP FAQ: Expert Answers to Real-World Questions](https://modelcontextprotocol.info/docs/faqs/)
  * [MCP Best Practices: Architecture & Implementation Guide](https://modelcontextprotocol.info/docs/best-practices/)
  * [SDK ](https://modelcontextprotocol.info/docs/sdk/)

    * [Java SDK ](https://modelcontextprotocol.info/docs/sdk/java/)

      * [Overview](https://modelcontextprotocol.info/docs/sdk/java/mcp-overview/)
      * [MCP Server](https://modelcontextprotocol.info/docs/sdk/java/mcp-server/)
      * [MCP Client](https://modelcontextprotocol.info/docs/sdk/java/mcp-client/)

  * [Build an MCP Client (Core)](https://modelcontextprotocol.info/docs/development/build-client/)
  * More
  * [Docs ↗](https://modelcontextprotocol.info/docs/)
  * [Specification ↗](https://modelcontextprotocol.info/specification/)
  * [About](https://modelcontextprotocol.info/about)



English

  * [English](https://modelcontextprotocol.info/docs/concepts/transports/)
  * [简体中文](https://modelcontextprotocol.info/zh-cn/docs/concepts/transports/)
  * [繁體中文](https://modelcontextprotocol.info/zh-tw/docs/concepts/transports/)
  * [한국어](https://modelcontextprotocol.info/ko/docs/concepts/transports/)



  * Light 

  * Dark 

  * System 




On this page

  * Message Format
  * Requests
  * Responses
  * Notifications
  * Built-in Transport Types
  * Standard Input/Output (stdio)
  * Server-Sent Events (SSE)
  * Custom Transports
  * Error Handling
  * Best Practices
  * Security Considerations
  * Authentication and Authorization
  * Data Security
  * Network Security
  * Debugging Transport



Scroll to top

[MCP Docs](https://modelcontextprotocol.info/docs/)

[Core Concepts](https://modelcontextprotocol.info/docs/concepts/)

Transports

# Transports

Transports in the Model Context Protocol (MCP) provide the foundation for communication between clients and servers. A transport handles the underlying mechanics of how messages are sent and received.

## Message Format

MCP uses [JSON-RPC](https://www.jsonrpc.org/) 2.0 as its wire format. The transport layer is responsible for converting MCP protocol messages into JSON-RPC format for transmission and converting received JSON-RPC messages back into MCP protocol messages.

There are three types of JSON-RPC messages used:

### Requests
    
    
    {
      jsonrpc: "2.0",
      id: number | string,
      method: string,
      params?: object
    }

### Responses
    
    
    {
      jsonrpc: "2.0",
      id: number | string,
      result?: object,
      error?: {
        code: number,
        message: string,
        data?: unknown
      }
    }

### Notifications
    
    
    {
      jsonrpc: "2.0",
      method: string,
      params?: object
    }

## Built-in Transport Types

MCP includes two standard transport implementations:

### Standard Input/Output (stdio)

The stdio transport enables communication through standard input and output streams. This is particularly useful for local integrations and command-line tools.

Use stdio when:

  * Building command-line tools
  * Implementing local integrations
  * Needing simple process communication
  * Working with shell scripts



TypeScript (Server) TypeScript (Client) Python (Server) Python (Client)
    
    
    1
    2
    3
    4
    5
    6
    7
    8
    9
    

| 
    
    
        const server = new Server({
          name: "example-server",
          version: "1.0.0"
        }, {
          capabilities: {}
        });
    
        const transport = new StdioServerTransport();
        await server.connect(transport);  
  
---|---  
      
    
     1
     2
     3
     4
     5
     6
     7
     8
     9
    10
    11
    12
    

| 
    
    
        const client = new Client({
          name: "example-client",
          version: "1.0.0"
        }, {
          capabilities: {}
        });
    
        const transport = new StdioClientTransport({
          command: "./server",
          args: ["--option", "value"]
        });
        await client.connect(transport);  
  
---|---  
      
    
    1
    2
    3
    4
    5
    6
    7
    8
    9
    

| 
    
    
        app = Server("example-server")
    
        async with stdio_server() as streams:
            await app.run(
                streams[0],
                streams[1],
                app.create_initialization_options()
            )  
  
---|---  
      
    
    1
    2
    3
    4
    5
    6
    7
    8
    

| 
    
    
        params = StdioServerParameters(
            command="./server",
            args=["--option", "value"]
        )
    
        async with stdio_client(params) as streams:
            async with ClientSession(streams[0], streams[1]) as session:
                await session.initialize()  
  
---|---  
  
### Server-Sent Events (SSE)

SSE transport enables server-to-client streaming with HTTP POST requests for client-to-server communication.

Use SSE when:

  * Only server-to-client streaming is needed
  * Working with restricted networks
  * Implementing simple updates



TypeScript (Server)TypeScript (Client)Python (Server)Python (Client)
    
    
    import express from "express";
        
    const app = express();
        
    const server = new Server({
      name: "example-server",
      version: "1.0.0"
    }, {
      capabilities: {}
    });
        
    let transport: SSEServerTransport | null = null;
    
    app.get("/sse", (req, res) => {
      transport = new SSEServerTransport("/messages", res);
      server.connect(transport);
    });
    
    app.post("/messages", (req, res) => {
      if (transport) {
        transport.handlePostMessage(req, res);
      }
    });
    
    app.listen(3000);
    
    
    const client = new Client({
      name: "example-client",
      version: "1.0.0"
    }, {
      capabilities: {}
    });
    
    const transport = new SSEClientTransport(
      new URL("http://localhost:3000/sse")
    );
    await client.connect(transport);
    
    
    from mcp.server.sse import SseServerTransport
    from starlette.applications import Starlette
    from starlette.routing import Route
    
    app = Server("example-server")
    sse = SseServerTransport("/messages")
    
    async def handle_sse(scope, receive, send):
        async with sse.connect_sse(scope, receive, send) as streams:
            await app.run(streams[0], streams[1], app.create_initialization_options())
    
    async def handle_messages(scope, receive, send):
        await sse.handle_post_message(scope, receive, send)
    
    starlette_app = Starlette(
        routes=[
            Route("/sse", endpoint=handle_sse),
            Route("/messages", endpoint=handle_messages, methods=["POST"]),
        ]
    )
    
    
    async with sse_client("http://localhost:8000/sse") as streams:
        async with ClientSession(streams[0], streams[1]) as session:
            await session.initialize()

## Custom Transports

MCP makes it easy to implement custom transports for specific needs. Any transport implementation just needs to conform to the Transport interface:

You can implement custom transports for:

  * Custom network protocols
  * Specialized communication channels
  * Integration with existing systems
  * Performance optimization



TypeScriptPython
    
    
        interface Transport {
          // Start processing messages
          start(): Promise<void>;
    
          // Send a JSON-RPC message
          send(message: JSONRPCMessage): Promise<void>;
    
          // Close the connection
          close(): Promise<void>;
    
          // Callbacks
          onclose?: () => void;
          onerror?: (error: Error) => void;
          onmessage?: (message: JSONRPCMessage) => void;
        }
    
    
    Note that while MCP Servers are often implemented with asyncio, we recommend
    implementing low-level interfaces like transports with `anyio` for wider compatibility.
    ```python
    @contextmanager
    async def create_transport(
        read_stream: MemoryObjectReceiveStream[JSONRPCMessage | Exception],
        write_stream: MemoryObjectSendStream[JSONRPCMessage]
    ):
        """
        Transport interface for MCP.
    
        Args:
            read_stream: Stream to read incoming messages from
            write_stream: Stream to write outgoing messages to
        """
        async with anyio.create_task_group() as tg:
            try:
                # Start processing messages
                tg.start_soon(lambda: process_messages(read_stream))
    
                # Send messages
                async with write_stream:
                    yield write_stream
    
            except Exception as exc:
                # Handle errors
                raise exc
            finally:
                # Clean up
                tg.cancel_scope.cancel()
                await write_stream.aclose()
                await read_stream.aclose()
    


## Error Handling

Transport implementations should handle various error scenarios:

  1. Connection errors
  2. Message parsing errors
  3. Protocol errors
  4. Network timeouts
  5. Resource cleanup



Example error handling:

TypeScriptPython
    
    
        class ExampleTransport implements Transport {
          async start() {
            try {
              // Connection logic
            } catch (error) {
              this.onerror?.(new Error(`Failed to connect: ${error}`));
              throw error;
            }
          }
    
          async send(message: JSONRPCMessage) {
            try {
              // Sending logic
            } catch (error) {
              this.onerror?.(new Error(`Failed to send message: ${error}`));
              throw error;
            }
          }
        }

Note that while MCP Servers are often implemented with asyncio, we recommend implementing low-level interfaces like transports with `anyio` for wider compatibility.
    
    
        @contextmanager
        async def example_transport(scope: Scope, receive: Receive, send: Send):
            try:
                # Create streams for bidirectional communication
                read_stream_writer, read_stream = anyio.create_memory_object_stream(0)
                write_stream, write_stream_reader = anyio.create_memory_object_stream(0)
    
                async def message_handler():
                    try:
                        async with read_stream_writer:
                            # Message handling logic
                            pass
                    except Exception as exc:
                        logger.error(f"Failed to handle message: {exc}")
                        raise exc
    
                async with anyio.create_task_group() as tg:
                    tg.start_soon(message_handler)
                    try:
                        # Yield streams for communication
                        yield read_stream, write_stream
                    except Exception as exc:
                        logger.error(f"Transport error: {exc}")
                        raise exc
                    finally:
                        tg.cancel_scope.cancel()
                        await write_stream.aclose()
                        await read_stream.aclose()
            except Exception as exc:
                logger.error(f"Failed to initialize transport: {exc}")
                raise exc

## Best Practices

When implementing or using MCP transport:

  1. Handle connection lifecycle properly
  2. Implement proper error handling
  3. Clean up resources on connection close
  4. Use appropriate timeouts
  5. Validate messages before sending
  6. Log transport events for debugging
  7. Implement reconnection logic when appropriate
  8. Handle backpressure in message queues
  9. Monitor connection health
  10. Implement proper security measures



## Security Considerations

When implementing transport:

### Authentication and Authorization

  * Implement proper authentication mechanisms
  * Validate client credentials
  * Use secure token handling
  * Implement authorization checks



### Data Security

  * Use TLS for network transport
  * Encrypt sensitive data
  * Validate message integrity
  * Implement message size limits
  * Sanitize input data



### Network Security

  * Implement rate limiting
  * Use appropriate timeouts
  * Handle denial of service scenarios
  * Monitor for unusual patterns
  * Implement proper firewall rules



## Debugging Transport

Tips for debugging transport issues:

  1. Enable debug logging
  2. Monitor message flow
  3. Check connection states
  4. Validate message formats
  5. Test error scenarios
  6. Use network analysis tools
  7. Implement health checks
  8. Monitor resource usage
  9. Test edge cases
  10. Use proper error tracking



[Tools](https://modelcontextprotocol.info/docs/concepts/tools/ "Tools")

[Model Context Protocol Hub ](https://modelcontextprotocol.info "Model Context Protocol")[MCP 中文站 ](https://mcpcn.com "MCP 中文社区")[A2A Protocol ](https://a2acn.com "A2A Protocol Community")[AP2 Lab ](https://ap2lab.com "Agent Payments Protocol Community")[ACP Protocol ](https://acplib.com "Agentic Commerce Protocol Community")[Agent2Agent 文档 ](https://agent2agent.info "Agent2Agent Protocol")[AI to Sora ](https://aitosora.com "AI to Sora")[ChatGPT 中文](https://chatgptcn.com "ChatGPT 中文社区")

[Powered by ModelContextProtocol](https://github.com/imfing/hextra "Hextra GitHub Homepage")

© 2024 ModelContextProtocol.Info.
