[ Model Context Protocol （MCP） ](https://modelcontextprotocol.info/)[Home ](https://modelcontextprotocol.info/)[Documentation ](https://modelcontextprotocol.info/docs/)[Specification ](https://modelcontextprotocol.info/specification/)[Tools ](https://modelcontextprotocol.info/tools/)[Blog](https://modelcontextprotocol.info/blog/)

`CTRL K`




`CTRL K`




  * [MCP Docs ](https://modelcontextprotocol.info/docs/)

    * [Understanding Model Context Protocol (MCP)](https://modelcontextprotocol.info/docs/introduction/)
    * [MCP Learning Path: From Zero to Hero](https://modelcontextprotocol.info/docs/learning-path/)
    * [Quickstart ](https://modelcontextprotocol.info/docs/quickstart/)

      * [Guide](https://modelcontextprotocol.info/docs/quickstart/guide/)
      * [For Server Developers](https://modelcontextprotocol.info/docs/quickstart/server/)
      * [For Client Developers](https://modelcontextprotocol.info/docs/quickstart/client/)
      * [Your First MCP Experience: 5-Minute Setup](https://modelcontextprotocol.info/docs/quickstart/user/)
      * [Quickstart](https://modelcontextprotocol.info/docs/quickstart/quickstart/)

    * [Core Concepts ](https://modelcontextprotocol.info/docs/concepts/)

      * [MCP Architecture: Design Philosophy & Engineering Principles](https://modelcontextprotocol.info/docs/concepts/architecture/)
      * [Prompts](https://modelcontextprotocol.info/docs/concepts/prompts/)
      * [Resources](https://modelcontextprotocol.info/docs/concepts/resources/)
      * [Roots](https://modelcontextprotocol.info/docs/concepts/roots/)
      * [Sampling](https://modelcontextprotocol.info/docs/concepts/sampling/)
      * [Tools](https://modelcontextprotocol.info/docs/concepts/tools/)
      * [Transports](https://modelcontextprotocol.info/docs/concepts/transports/)

    * [MCP Tutorials: From Concept to Production ](https://modelcontextprotocol.info/docs/tutorials/)

      * [Building MCP with LLMs](https://modelcontextprotocol.info/docs/tutorials/building-mcp-with-llms/)
      * [Building MCP clients-Python](https://modelcontextprotocol.info/docs/tutorials/building-a-client/)
      * [Building MCP clients-Node.js](https://modelcontextprotocol.info/docs/tutorials/building-a-client-node/)
      * [Writing Effective Tools for Agents: Complete MCP Development Guide](https://modelcontextprotocol.info/docs/tutorials/writing-effective-tools/)

    * [MCP Server Ecosystem: From Proof-of-Concept to Production](https://modelcontextprotocol.info/docs/examples/)
    * [Clients](https://modelcontextprotocol.info/docs/clients/)
    * [MCP FAQ: Expert Answers to Real-World Questions](https://modelcontextprotocol.info/docs/faqs/)
    * [MCP Best Practices: Architecture & Implementation Guide](https://modelcontextprotocol.info/docs/best-practices/)
    * [SDK ](https://modelcontextprotocol.info/docs/sdk/)

      * [Java SDK ](https://modelcontextprotocol.info/docs/sdk/java/)

        * [Overview](https://modelcontextprotocol.info/docs/sdk/java/mcp-overview/)
        * [MCP Server](https://modelcontextprotocol.info/docs/sdk/java/mcp-server/)
        * [MCP Client](https://modelcontextprotocol.info/docs/sdk/java/mcp-client/)
          * Client Transport
          * Client Capabilities
          * Using MCP Clients

    * [Build an MCP Client (Core)](https://modelcontextprotocol.info/docs/development/build-client/)

  * [Tools ](https://modelcontextprotocol.info/tools/)

    * [MCP Registry ](https://modelcontextprotocol.info/tools/registry/)

      * [Publish Your MCP Server](https://modelcontextprotocol.info/tools/registry/publishing/)
      * [Registry CLI Tool](https://modelcontextprotocol.info/tools/registry/cli/)
      * [GitHub Actions 自动化发布](https://modelcontextprotocol.info/tools/registry/github-actions/)
      * [消费 Registry 数据](https://modelcontextprotocol.info/tools/registry/consuming/)
      * [Registry FAQ](https://modelcontextprotocol.info/tools/registry/faq/)

    * [Debugging](https://modelcontextprotocol.info/tools/debugging/)
    * [Inspector](https://modelcontextprotocol.info/tools/inspector/)
    * [测试](https://modelcontextprotocol.info/tools/test/)

  * [Specification ](https://modelcontextprotocol.info/specification/)

    * [Specification (Draft) ](https://modelcontextprotocol.info/specification/draft/)

      * [Architecture](https://modelcontextprotocol.info/specification/draft/architecture/)
      * [Base Protocol ](https://modelcontextprotocol.info/specification/draft/basic/)

        * [Transports](https://modelcontextprotocol.info/specification/draft/basic/transports/)
        * [Authorization](https://modelcontextprotocol.info/specification/draft/basic/authorization/)
        * [Messages](https://modelcontextprotocol.info/specification/draft/basic/messages/)
        * [Lifecycle](https://modelcontextprotocol.info/specification/draft/basic/lifecycle/)
        * [Versioning](https://modelcontextprotocol.info/specification/draft/basic/versioning/)
        * [Utilities ](https://modelcontextprotocol.info/specification/draft/basic/utilities/)

          * [Ping](https://modelcontextprotocol.info/specification/draft/basic/utilities/ping/)
          * [Cancellation](https://modelcontextprotocol.info/specification/draft/basic/utilities/cancellation/)
          * [Progress](https://modelcontextprotocol.info/specification/draft/basic/utilities/progress/)

      * [Server Features ](https://modelcontextprotocol.info/specification/draft/server/)

        * [Prompts](https://modelcontextprotocol.info/specification/draft/server/prompts/)
        * [Resources](https://modelcontextprotocol.info/specification/draft/server/resources/)
        * [Tools](https://modelcontextprotocol.info/specification/draft/server/tools/)
        * [Utilities ](https://modelcontextprotocol.info/specification/draft/server/utilities/)

          * [Completion](https://modelcontextprotocol.info/specification/draft/server/utilities/completion/)
          * [Logging](https://modelcontextprotocol.info/specification/draft/server/utilities/logging/)
          * [Pagination](https://modelcontextprotocol.info/specification/draft/server/utilities/pagination/)

      * [Client Features ](https://modelcontextprotocol.info/specification/draft/client/)

        * [Roots](https://modelcontextprotocol.info/specification/draft/client/roots/)
        * [Sampling](https://modelcontextprotocol.info/specification/draft/client/sampling/)

      * [Contributions](https://modelcontextprotocol.info/specification/draft/contributing/)
      * [Revisions ](https://modelcontextprotocol.info/specification/draft/revisions/)

        * [2024-11-05 (Current)](https://modelcontextprotocol.info/specification/draft/revisions/2024-11-05/)

    * [Specification (Latest) ](https://modelcontextprotocol.info/specification/2024-11-05/)

      * [Architecture](https://modelcontextprotocol.info/specification/2024-11-05/architecture/)
      * [Base Protocol ](https://modelcontextprotocol.info/specification/2024-11-05/basic/)

        * [Messages](https://modelcontextprotocol.info/specification/2024-11-05/basic/messages/)
        * [Lifecycle](https://modelcontextprotocol.info/specification/2024-11-05/basic/lifecycle/)
        * [Transports](https://modelcontextprotocol.info/specification/2024-11-05/basic/transports/)
        * [Versioning](https://modelcontextprotocol.info/specification/2024-11-05/basic/versioning/)
        * [Utilities ](https://modelcontextprotocol.info/specification/2024-11-05/basic/utilities/)

          * [Ping](https://modelcontextprotocol.info/specification/2024-11-05/basic/utilities/ping/)
          * [Cancellation](https://modelcontextprotocol.info/specification/2024-11-05/basic/utilities/cancellation/)
          * [Progress](https://modelcontextprotocol.info/specification/2024-11-05/basic/utilities/progress/)

      * [Server Features ](https://modelcontextprotocol.info/specification/2024-11-05/server/)

        * [Prompts](https://modelcontextprotocol.info/specification/2024-11-05/server/prompts/)
        * [Resources](https://modelcontextprotocol.info/specification/2024-11-05/server/resources/)
        * [Tools](https://modelcontextprotocol.info/specification/2024-11-05/server/tools/)
        * [Utilities ](https://modelcontextprotocol.info/specification/2024-11-05/server/utilities/)

          * [Completion](https://modelcontextprotocol.info/specification/2024-11-05/server/utilities/completion/)
          * [Logging](https://modelcontextprotocol.info/specification/2024-11-05/server/utilities/logging/)
          * [Pagination](https://modelcontextprotocol.info/specification/2024-11-05/server/utilities/pagination/)

      * [Client Features ](https://modelcontextprotocol.info/specification/2024-11-05/client/)

        * [Roots](https://modelcontextprotocol.info/specification/2024-11-05/client/roots/)
        * [Sampling](https://modelcontextprotocol.info/specification/2024-11-05/client/sampling/)

      * [Contributions](https://modelcontextprotocol.info/specification/2024-11-05/contributing/)
      * [Revisions ](https://modelcontextprotocol.info/specification/2024-11-05/revisions/)

        * [2024-11-05 (Current)](https://modelcontextprotocol.info/specification/2024-11-05/revisions/2024-11-05/)

  * [MCP Protocol Blog ](https://modelcontextprotocol.info/blog/)

    * [Mastering MCP Tool Development: Unlocking AI Agent Potential](https://modelcontextprotocol.info/blog/writing-effective-mcp-tools/)
    * [Update on the Next MCP Protocol Release](https://modelcontextprotocol.info/blog/mcp-next-version-update/)
    * [Chrome DevTools MCP: Giving AI Coding Assistants Eyes to See Beyond Blind Programming](https://modelcontextprotocol.info/blog/chrome-devtools-mcp-ai-debugging/)
    * [Model Context Protocol (MCP): A New Standard for AI Application and External Data Integration](https://modelcontextprotocol.info/blog/mcp-guide/)
    * [一文读懂MCP协议：大模型AI-Agent的USB-C接口](https://modelcontextprotocol.info/blog/understanding-mcp-protocol/)

  * [About](https://modelcontextprotocol.info/about/)
  * More
  * [Docs ↗](https://modelcontextprotocol.info/docs/)
  * [Specification ↗](https://modelcontextprotocol.info/specification/)
  * [About](https://modelcontextprotocol.info/about)


  * [Understanding Model Context Protocol (MCP)](https://modelcontextprotocol.info/docs/introduction/)
  * [MCP Learning Path: From Zero to Hero](https://modelcontextprotocol.info/docs/learning-path/)
  * [Quickstart ](https://modelcontextprotocol.info/docs/quickstart/)

    * [Guide](https://modelcontextprotocol.info/docs/quickstart/guide/)
    * [For Server Developers](https://modelcontextprotocol.info/docs/quickstart/server/)
    * [For Client Developers](https://modelcontextprotocol.info/docs/quickstart/client/)
    * [Your First MCP Experience: 5-Minute Setup](https://modelcontextprotocol.info/docs/quickstart/user/)
    * [Quickstart](https://modelcontextprotocol.info/docs/quickstart/quickstart/)

  * [Core Concepts ](https://modelcontextprotocol.info/docs/concepts/)

    * [MCP Architecture: Design Philosophy & Engineering Principles](https://modelcontextprotocol.info/docs/concepts/architecture/)
    * [Prompts](https://modelcontextprotocol.info/docs/concepts/prompts/)
    * [Resources](https://modelcontextprotocol.info/docs/concepts/resources/)
    * [Roots](https://modelcontextprotocol.info/docs/concepts/roots/)
    * [Sampling](https://modelcontextprotocol.info/docs/concepts/sampling/)
    * [Tools](https://modelcontextprotocol.info/docs/concepts/tools/)
    * [Transports](https://modelcontextprotocol.info/docs/concepts/transports/)

  * [MCP Tutorials: From Concept to Production ](https://modelcontextprotocol.info/docs/tutorials/)

    * [Building MCP with LLMs](https://modelcontextprotocol.info/docs/tutorials/building-mcp-with-llms/)
    * [Building MCP clients-Python](https://modelcontextprotocol.info/docs/tutorials/building-a-client/)
    * [Building MCP clients-Node.js](https://modelcontextprotocol.info/docs/tutorials/building-a-client-node/)
    * [Writing Effective Tools for Agents: Complete MCP Development Guide](https://modelcontextprotocol.info/docs/tutorials/writing-effective-tools/)

  * [MCP Server Ecosystem: From Proof-of-Concept to Production](https://modelcontextprotocol.info/docs/examples/)
  * [Clients](https://modelcontextprotocol.info/docs/clients/)
  * [MCP FAQ: Expert Answers to Real-World Questions](https://modelcontextprotocol.info/docs/faqs/)
  * [MCP Best Practices: Architecture & Implementation Guide](https://modelcontextprotocol.info/docs/best-practices/)
  * [SDK ](https://modelcontextprotocol.info/docs/sdk/)

    * [Java SDK ](https://modelcontextprotocol.info/docs/sdk/java/)

      * [Overview](https://modelcontextprotocol.info/docs/sdk/java/mcp-overview/)
      * [MCP Server](https://modelcontextprotocol.info/docs/sdk/java/mcp-server/)
      * [MCP Client](https://modelcontextprotocol.info/docs/sdk/java/mcp-client/)

  * [Build an MCP Client (Core)](https://modelcontextprotocol.info/docs/development/build-client/)
  * More
  * [Docs ↗](https://modelcontextprotocol.info/docs/)
  * [Specification ↗](https://modelcontextprotocol.info/specification/)
  * [About](https://modelcontextprotocol.info/about)



English

  * [English](https://modelcontextprotocol.info/docs/sdk/java/mcp-client/)
  * [简体中文](https://modelcontextprotocol.info/zh-cn/docs/sdk/java/mcp-client/)
  * [繁體中文](https://modelcontextprotocol.info/zh-tw/docs/sdk/java/mcp-client/)
  * [한국어](https://modelcontextprotocol.info/ko/docs/sdk/java/mcp-client/)



  * Light 

  * Dark 

  * System 




On this page

  * Client Transport
  * Client Capabilities
  * Roots Support
  * Sampling Support
  * Using MCP Clients
  * Tool Execution
  * Resource Access
  * Prompt System



Scroll to top

[MCP Docs](https://modelcontextprotocol.info/docs/)

[SDK](https://modelcontextprotocol.info/docs/sdk/)

[Java SDK](https://modelcontextprotocol.info/docs/sdk/java/)

MCP Client

# MCP Client

# Model Context Protocol Client

The MCP Client is a key component in the Model Context Protocol (MCP) architecture, responsible for establishing and managing connections with MCP servers. It implements the client-side of the protocol, handling:

  * Protocol version negotiation to ensure compatibility with servers
  * Capability negotiation to determine available features
  * Message transport and JSON-RPC communication
  * Tool discovery and execution
  * Resource access and management
  * Prompt system interactions
  * Optional features like roots management and sampling support



The client provides both synchronous and asynchronous APIs for flexibility in different application contexts.

Sync APIAsync API
    
    
    // Create a sync client with custom configuration
    McpSyncClient client = McpClient.sync(transport)
        .requestTimeout(Duration.ofSeconds(10))
        .capabilities(ClientCapabilities.builder()
            .roots(true)      // Enable roots capability
            .sampling()       // Enable sampling capability
            .build())
        .sampling(request -> new CreateMessageResult(response))
        .build();
    
    // Initialize connection
    client.initialize();
    
    // List available tools
    ListToolsResult tools = client.listTools();
    
    // Call a tool
    CallToolResult result = client.callTool(
        new CallToolRequest("calculator", 
            Map.of("operation", "add", "a", 2, "b", 3))
    );
    
    
    // Create an async client with custom configuration
    McpAsyncClient client = McpClient.async(transport)
        .requestTimeout(Duration.ofSeconds(10))
        .capabilities(ClientCapabilities.builder()
            .roots(true)      // Enable roots capability
            .sampling()       // Enable sampling capability
            .build())
        .sampling(request -> Mono.just(new CreateMessageResult(response)))
        .build();

## Client Transport

The transport layer handles the communication between MCP clients and servers, providing different implementations for various use cases. The client transport manages message serialization, connection establishment, and protocol-specific communication patterns.

STDIOSSE (HttpClient)SSE (WebFlux)

Creates transport for in-process based communication
    
    
    ServerParameters params = ServerParameters.builder("npx")
        .args("-y", "@modelcontextprotocol/server-everything", "dir")
        .build();
    McpTransport transport = new StdioClientTransport(params);

Creates a framework agnostic (pure Java API) SSE client transport. Included in the core mcp module.
    
    
    McpTransport transport = new HttpClientSseClientTransport("http://your-mcp-server");

Creates WebFlux-based SSE client transport. Requires the mcp-webflux-sse-transport dependency.
    
    
    WebClient.Builder webClientBuilder = WebClient.builder()
        .baseUrl("http://your-mcp-server");
    McpTransport transport = new WebFluxSseClientTransport(webClientBuilder);

## Client Capabilities

The client can be configured with various capabilities:
    
    
    var capabilities = ClientCapabilities.builder()
        .roots(true)      // Enable filesystem roots support with list changes notifications
        .sampling()       // Enable LLM sampling support
        .build();

### Roots Support

Roots define the boundaries of where servers can operate within the filesystem:
    
    
    // Add a root dynamically
    client.addRoot(new Root("file:///path", "description"));
    
    // Remove a root
    client.removeRoot("file:///path");
    
    // Notify server of roots changes
    client.rootsListChangedNotification();

The roots capability allows servers to:

  * Request the list of accessible filesystem roots
  * Receive notifications when the roots list changes
  * Understand which directories and files they have access to



### Sampling Support

Sampling enables servers to request LLM interactions ("completions" or "generations") through the client:
    
    
    // Configure sampling handler
    Function<CreateMessageRequest, CreateMessageResult> samplingHandler = request -> {
        // Sampling implementation that interfaces with LLM
        return new CreateMessageResult(response);
    };
    
    // Create client with sampling support
    var client = McpClient.sync(transport)
        .capabilities(ClientCapabilities.builder()
            .sampling()
            .build())
        .sampling(samplingHandler)
        .build();

This capability allows:

  * Servers to leverage AI capabilities without requiring API keys
  * Clients to maintain control over model access and permissions
  * Support for both text and image-based interactions
  * Optional inclusion of MCP server context in prompts



## Using MCP Clients

### Tool Execution

Tools are server-side functions that clients can discover and execute. The MCP client provides methods to list available tools and execute them with specific parameters. Each tool has a unique name and accepts a map of parameters.

```java // List available tools and their names var tools = client.listTools(); tools.forEach(tool -> System.out.println(tool.getName()));

// Execute a tool with parameters var result = client.callTool("calculator", Map.of( "operation", "add", "a", 1, "b", 2 ));
    
    
      </Tab>
    
      <Tab title="Async API">
    ```java
    // List available tools asynchronously
    client.listTools()
        .doOnNext(tools -> tools.forEach(tool -> 
            System.out.println(tool.getName())))
        .subscribe();
    
    // Execute a tool asynchronously
    client.callTool("calculator", Map.of(
            "operation", "add",
            "a", 1,
            "b", 2
        ))
        .subscribe();

### Resource Access

Resources represent server-side data sources that clients can access using URI templates. The MCP client provides methods to discover available resources and retrieve their contents through a standardized interface.

```java // List available resources and their names var resources = client.listResources(); resources.forEach(resource -> System.out.println(resource.getName()));

// Retrieve resource content using a URI template var content = client.getResource("file", Map.of( "path", "/path/to/file.txt" ));
    
    
      </Tab>
    
      <Tab title="Async API">
    ```java
    // List available resources asynchronously
    client.listResources()
        .doOnNext(resources -> resources.forEach(resource -> 
            System.out.println(resource.getName())))
        .subscribe();
    
    // Retrieve resource content asynchronously
    client.getResource("file", Map.of(
            "path", "/path/to/file.txt"
        ))
        .subscribe();

### Prompt System

The prompt system enables interaction with server-side prompt templates. These templates can be discovered and executed with custom parameters, allowing for dynamic text generation based on predefined patterns.

```java // List available prompt templates var prompts = client.listPrompts(); prompts.forEach(prompt -> System.out.println(prompt.getName()));

// Execute a prompt template with parameters var response = client.executePrompt("echo", Map.of( "text", "Hello, World!" ));
    
    
      </Tab>
    
      <Tab title="Async API">
    ```java
    // List available prompt templates asynchronously
    client.listPrompts()
        .doOnNext(prompts -> prompts.forEach(prompt -> 
            System.out.println(prompt.getName())))
        .subscribe();
    
    // Execute a prompt template asynchronously
    client.executePrompt("echo", Map.of(
            "text", "Hello, World!"
        ))
        .subscribe();

[MCP Server](https://modelcontextprotocol.info/docs/sdk/java/mcp-server/ "MCP Server")

[Model Context Protocol Hub ](https://modelcontextprotocol.info "Model Context Protocol")[MCP 中文站 ](https://mcpcn.com "MCP 中文社区")[A2A Protocol ](https://a2acn.com "A2A Protocol Community")[AP2 Lab ](https://ap2lab.com "Agent Payments Protocol Community")[ACP Protocol ](https://acplib.com "Agentic Commerce Protocol Community")[Agent2Agent 文档 ](https://agent2agent.info "Agent2Agent Protocol")[AI to Sora ](https://aitosora.com "AI to Sora")[ChatGPT 中文](https://chatgptcn.com "ChatGPT 中文社区")

[Powered by ModelContextProtocol](https://github.com/imfing/hextra "Hextra GitHub Homepage")

© 2024 ModelContextProtocol.Info.
